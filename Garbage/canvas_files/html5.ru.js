this.__init__=webpackJsonp__init__([1],{103:function(e,t){},104:function(e,t){},105:function(e,t){},106:function(e,t){},107:function(e,t){},108:function(e,t){},109:function(e,t){},110:function(e,t,n){"use strict";e.exports={gallery:{"all-categories-key":"Все категории","apply-resource":"Создать баннер на основе","asc-order":"Сначала старые","audio-title":"Библиотека аудиороликов","categories-text":"Выбор тематик","default-tab-name":"Стандартные","desc-order":"Сначала новые","empty-gallery-message":"Ничего не найдено","idea-tab-name":"Изображения со страницы","image-preview-header":"Предпросмотр изображения","order-by-date-label":"Сортировать по дате","preview-cancel":"Отмена","preview-select":"Выбрать","recently-used-tab-name":"Ранее использованные","remove-item-apply":"Удалить","remove-item-cancel":"Отменить","remove-item-confirmation":function(e){return["Вы уверены, что хотите удалить изображение ",e.name,"?"]},"search-input-text":"Найти",title:"Библиотека изображений","video-preview-header":"Креатив","video-title":"Библиотека видеороликов","view-original":"Посмотреть оригинал","zoom-in-button-text":"Увеличить"}}},119:function(e,t){},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0);t.default=(0,i.declMod)(function(e){return e.opacity},{block:"icon",mods:function(e){var t=e.opacity;return r({},this.__base.apply(this,arguments),{opacity:t})}})},120:function(e,t){},121:function(e,t){},122:function(e,t){},123:function(e,t){},124:function(e,t){},126:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),l=r(o),s=n(0),u=(n(41),n(42),n(119),n(120),n(121),(n(22).default||n(22)).applyDecls()),a=r(u),c=function(){var e=n(3);return e().decl(n(67))("menu")}(),f=r(c),d=n(14),p=(n(467),(n(258).default||n(258)).applyDecls()),h=r(p);t.default=(0,s.decl)({block:"entities-list",elem:"header",content:function(){var e=this,t=[{key:"html5",title:(0,f.default)("creatives"),url:(0,d.html5Url)("/")},{key:"turbo",title:(0,f.default)("turbo"),url:(0,d.landingsUrl)("/")},{key:"archive",title:(0,f.default)("archive"),url:(0,d.html5Url)("/archive")}];return Array.isArray(this.props.links)&&(t=t.filter(function(t){return-1!==e.props.links.indexOf(t.key)})),[].concat(i(t.map(function(t){return l.default.createElement(a.default,{key:t.key,type:"link",theme:"ghost",url:t.url,mix:{block:"entities-list",elem:"header-link",mods:{active:e.props.active===t.key}}},t.title)})),[this.props.filters?l.default.createElement(h.default,{key:"filters",filters:this.props.filters,values:this.props.filtersValues,onFiltersChange:this.props.onFiltersChange}):""])}})},127:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(137),o=r(i),l=n(1),s=r(l),u=n(0),a=r(u),c=(n(79),n(78),n(92),n(65),(n(268).default||n(268)).applyDecls()),f=r(c),d=(n(30),n(31),n(123),n(124),n(43),(n(15).default||n(15)).applyDecls()),p=r(d),h=function(){var e=n(3);return e().decl(n(45))("landings")}(),m=r(h);t.default=(0,u.decl)({block:"copy-link",willInit:function(){this.state={linkWasCopied:!1},this.resetCopyButton=(0,o.default)(this.resetCopyButton.bind(this),2e3),this.onCopyButtonClick=this.onCopyButtonClick.bind(this),this.setLinkInputRef=this.setLinkInputRef.bind(this)},resetCopyButton:function(){this.setState({linkWasCopied:!1})},onCopyButtonClick:function(e){e.stopPropagation(),this._linkInput._control.select(),document.execCommand("copy"),this.setState({linkWasCopied:!0}),this.resetCopyButton()},setLinkInputRef:function(e){this._linkInput=e},content:function(){return[this.props.id?s.default.createElement(a.default,{key:"id-text",block:"copy-link",elem:"id-text"},"id ",this.props.id):"",this.props.url?[s.default.createElement(a.default,{key:"link-input",block:"copy-link",elem:"link-input"},s.default.createElement(f.default,{ref:this.setLinkInputRef,autoselect:!0,text:this.props.url,theme:"normal",size:"s"})),s.default.createElement(a.default,{key:"copy-button",block:"copy-link",elem:"copy-button"},document.execCommand?this.state.linkWasCopied?(0,m.default)("copy-link-success"):s.default.createElement(p.default,{theme:"pseudo",size:"s",onClick:this.onCopyButtonClick},(0,m.default)("copy-link")):"")]:""]}})},1377:function(e,t,n){"use strict";var r=n(359),i=n(494),o=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(14),s=(0,r.bundle)(o.default);e.hot.accept(494,function(){var e=n(494).default;s.updateClient(e)}),e.exports=function(e,t,n){(0,l.setSharedData)(t.sharedData),s.initClient(e,t,n)}},1378:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&(c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__),(0,o.createStore)(s.default,e,c((0,o.applyMiddleware)(a.default)))}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=i;var o=n(155),l=n(40),s=r(l),u=n(639),a=r(u),c=(n(640),o.compose)},1379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(88);t.default={getHtml5:function(e,t,n){return(0,i.html5Request)({path:"/rest/html5/batches",queryParams:r({offset:e,limit:t},n)})},patchHtml5ItemName:function(e,t){return(0,i.html5Request)({path:"/rest/html5/batch/"+e,options:{method:"PATCH",json:!1,body:{name:t}}})},selectHtml5Creatives:function(e){return(0,i.html5Request)({path:"/rest/html5/direct/creatives",options:{method:"POST",body:{batches:e}}})},deleteHtml5Item:function(e){return(0,i.html5Request)({path:"/rest/html5/batch/"+e,options:{method:"DELETE",json:!1}})}}},1380:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.type,r={name:d.default.html5("default-batch-name"),isSaving:!1,error:null,empty:!0};switch(e=e||r,n){case l.SET_BATCH:return r;case l.START_SAVE_BATCH:return(0,c.default)(e,{isSaving:{$set:!0}});case l.END_SAVE_BATCH:return(0,c.default)(e,{isSaving:{$set:!1}});case l.CHANGE_BATCH_NAME:return(0,c.default)(e,{name:{$set:t.name}});case l.SET_BATCH_ERROR:return(0,c.default)(e,{error:{$set:t.error}});case l.RESET_BATCH_ERROR:return null===e.error?e:(0,c.default)(e,{error:{$set:null}});case u.CREATE_SOURCE_UPLOAD:return e.empty?(0,c.default)(e,{empty:{$set:!1}}):e;default:return e}};var o=n(279),l=i(o),s=n(198),u=i(s),a=n(56),c=r(a),f=n(299),d=r(f)},1381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88);t.default={saveBatch:function(e){return(0,r.html5Request)({path:"/rest/html5/batch",options:{method:"POST",body:e}})}}},1382:function(e,t,n){"use strict";function r(e){return{name:(0,i.getBatch)(e).name,sources:(0,o.getUploaded)((0,i.getSources)(e)).map(function(e){return{id:e.id}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.toServer=r;var i=n(40),o=n(197)},1383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88),i=n(799),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);t.default={uploadSource:function(e){return(0,r.html5Request)({path:"/rest/html5/source",options:{method:"POST",body:o.toServer({source:e})}})}}},1384:function(e,t,n){"use strict";function r(){return{}}Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialState=r},1385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(169),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=(n(255),n(800),n(256),(n(342).default||n(342)).applyDecls()),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=n(40),a=n(149);t.default=(0,r.connect)(function(e){return{type:"html5",active:"html5",selected:(0,a.getSelected)((0,u.getHtml5)(e)),locked:(0,u.getHtml5)(e).locked}},function(e){return{changeHtml5Filters:function(t){return e(o.changeHtml5Filters(t))},selectHtml5Creatives:function(t){return e(o.selectHtml5Creatives(t))},unlockHtml5:function(){return e(o.unlockHtml5())}}})(s.default)},1386:function(e,t){},1387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(7),o=n(40),l=n(169),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),u=(function(){var e=n(3);e().decl(n(68))("html5")}(),n(1388),(n(802).default||n(802)).applyDecls()),a=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default=(0,i.connect)(function(e){return r({html5:(0,o.getHtml5)(e).list,filters:(0,o.getHtml5)(e).filters},(0,o.getHtml5)(e).loading)},function(e,t){return{fetchHtml5:function(n,i,o){return e(s.fetchHtml5(n,i,r({},o,t.filters)))},resetFilters:function(){return e(s.resetHtml5Filters())}}})(a.default)},1388:function(e,t){},1389:function(e,t){},1390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(7),o=n(40),l=n(149),s=n(169),u=(n(481),n(1391),n(482),(n(805).default||n(805)).applyDecls()),a=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default=(0,i.connect)(function(e,t){return r({},(0,l.getById)((0,o.getHtml5)(e),t.id),{type:"html5",selectedCreativesCount:(0,l.getSelectedCreativesCountById)((0,o.getHtml5)(e),t.id)})},function(e,t){return{onRenamed:function(n){return e((0,s.patchHtml5ItemName)(t.id,n))},onToggle:function(){return e((0,s.toggleHtml5Item)(t.id))},onDelete:function(){return e((0,s.deleteHtml5Item)(t.id))}}})(a.default)},1391:function(e,t){},1392:function(e,t){},1393:function(e,t){},1394:function(e,t){},1395:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=n(169),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),s=(n(255),n(800),n(256),(n(342).default||n(342)).applyDecls()),u=r(s),a=function(){var e=n(3);return e().decl(n(68))("html5")}(),c=r(a),f=n(40),d=n(149);t.default=(0,i.connect)(function(e){return{type:"html5",active:"archive",selected:(0,d.getSelected)((0,f.getHtml5)(e)),locked:(0,f.getHtml5)(e).locked,emptyLabel:(0,c.default)("empty-archive-message"),hasAddItem:!1,hasActionButton:!1,filters:{archive:!0}}},function(e){return{changeHtml5Filters:function(t){return e(l.changeHtml5Filters(t))},selectHtml5Creatives:function(t){return e(l.selectHtml5Creatives(t))},unlockHtml5:function(){return e(l.unlockHtml5())}}})(u.default)},1396:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),c=r(a),f=n(7),d=(n(425),(n(227).default||n(227)).applyDecls()),p=r(d),h=n(1397),m=r(h),y=(n(1399),(n(807).default||n(807)).applyDecls()),v=r(y),b=n(40),_=n(279),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state.isLoading=!1,n}return l(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.setBatch()}},{key:"getEditor",value:function(){return c.default.createElement(v.default,{key:"editor",mods:{empty:this.props.empty},isModalActionActive:this.state.isParanjaShown,onModalActionActiveChanged:this.onModalActionActiveChanged})}},{key:"getFooter",value:function(){return c.default.createElement(m.default,{key:"footer"})}}]),t}(p.default);t.default=(0,f.connect)(function(e){return{empty:(0,b.getBatch)(e).empty}},function(e){return{setBatch:function(){e((0,_.setBatch)())}}})(g)},1397:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),c=r(a),f=n(7),d=(n(429),(n(230).default||n(230)).applyDecls()),p=r(d),h=n(1398),m=r(h),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"content",value:function(){return c.default.createElement(m.default,null)}}]),t}(p.default);t.default=(0,f.connect)(null)(y)},1398:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),c=r(a),f=n(7),d=n(4),p=(n(430),(n(231).default||n(231)).applyDecls()),h=r(p),m=n(279),y=n(40),v=n(197),b=n(90),_=r(b),g=(n(30),n(31),n(107),n(108),n(51),n(52),n(43),n(15),(n(44).default||n(44)).applyDecls()),E=r(g),k=n(14),C=function(){var e=n(3);return e().decl(n(236))("add-creative")}(),S=r(C),O=function(){var e=n(3);return e().decl(n(29))("common")}(),R=r(O),I=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"content",value:function(){return[c.default.createElement(E.default,{key:"create",theme:"action",disabled:this.props.disabled,progress:this.props.isSaving,size:"s",onClick:this.props.saveBatch},(0,S.default)("create-creatives")),c.default.createElement(_.default,{key:"cancel",url:(0,k.html5Url)("/")},c.default.createElement(E.default,{theme:"normal",size:"s"},(0,R.default)("cancel")))]}}]),t}(h.default);I.contextTypes={store:d.PropTypes.object},t.default=(0,f.connect)(function(e){return{isSaving:(0,y.getBatch)(e).isSaving,disabled:!(0,v.getUploaded)((0,y.getSources)(e)).length||Boolean((0,v.getUploading)((0,y.getSources)(e)).length)}},function(e){return{saveBatch:function(){e((0,m.saveBatch)())}}})(I)},1399:function(e,t){},14:function(e,t,n){"use strict";function r(e,t){t?d[e]=t:delete d[e],window.history.replaceState({},"","?shared_data="+l())}function i(){return d}function o(e){d=e}function l(){return encodeURIComponent(JSON.stringify(i()))}function s(e,t,n){var r=-1===t.indexOf("?")?"?":"&";return n=f({},n,{shared_data:l()}),e+t+r+Object.keys(n).map(function(e){return[e,n[e]].join("=")}).join("&")}function u(e,t){return s("/landings",e,t)}function a(e,t){return s("/html5",e,t)}function c(e){return window.location.origin+"/html5/"+e}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.setSharedParameter=r,t.getSharedData=i,t.setSharedData=o,t.getEncodedSharedData=l,t.default=s,t.landingsUrl=u,t.html5Url=a,t.htmlPublicUrl=c;var d={}},1400:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(198),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=(n(1401),(n(808).default||n(808)).applyDecls()),s=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=(0,r.connect)(null,function(e){return{deleteSource:function(t){e(o.deleteSource(t))},createSourceUpload:function(t,n){e(o.createSourceUpload(t,n))},uploadSource:function(t,n){e(o.uploadSource(t,n))}}})(s.default)},1401:function(e,t){},1402:function(e,t){},1403:function(e,t){},1404:function(e,t){},1405:function(e,t){},1406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(198),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(40),s=n(197),u=(n(1407),(n(809).default||n(809)).applyDecls()),a=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default=(0,r.connect)(function(e){return{sources:(0,s.getUploaded)((0,l.getSources)(e)),focusedSource:(0,l.getSources)(e).focused}},function(e){return{requestSourceDeleting:function(t){e(o.requestSourceDeleting(t))}}})(a.default)},1407:function(e,t){},1408:function(e,t){},1409:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(198),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(40),s=n(197),u=(n(1410),(n(812).default||n(812)).applyDecls()),a=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default=(0,r.connect)(function(e){return{sources:(0,s.getWithoutOk)((0,l.getSources)(e))}},function(e){return{requestSourceDeleting:function(t){e(o.requestSourceDeleting(t))},uploadSource:function(t,n){e(o.uploadSource(t,n))},resetSourceUpload:function(t,n){e(o.resetSourceUpload(t,n))}}})(a.default)},141:function(e,t){},1410:function(e,t){},1411:function(e,t){},1412:function(e,t){},1413:function(e,t){},1415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(0);t.default=(0,o.declMod)({glyph:"repeat"},{block:"icon",content:function(){return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12"},i.default.createElement("path",{d:"M5.6 9.6a4 4 0 0 1 0-8c1.02 0 1.95.4 2.65 1.03L6.4 4.33 12 5.7 11.12 0 9.44 1.54A5.57 5.57 0 0 0 5.6 0a5.6 5.6 0 1 0 0 11.2 5.6 5.6 0 0 0 5-3.1l-1.44-.72A3.99 3.99 0 0 1 5.6 9.6"}))}})},1416:function(e,t){},1417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(198),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(40),s=n(197),u=(n(814),(n(344).default||n(344)).applyDecls()),a=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default=(0,r.connect)(function(e){return{sourceId:"loadId",sources:(0,s.getWithoutErrors)((0,l.getSources)(e)),focusedSource:(0,l.getSources)(e).focused}},function(e){return{isSourceFocused:function(e,t){return e.loadId===t},requestSourceDeleting:function(t){e(o.requestSourceDeleting(t.loadId))},setSourceFocused:function(t){e(o.setSourceFocused(t))},setSourceBlured:function(t){e(o.setSourceBlured(t))}}})(a.default)},1418:function(e,t){},1419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(279),o=(n(192),(n(91).default||n(91)).applyDecls()),l=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(40);t.default=(0,r.connect)(function(e){return{name:(0,s.getBatch)(e).name}},function(e){return{onEditComplete:function(t){e((0,i.changeBatchName)(t))}}})(l.default)},142:function(e,t){},1420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=(n(239).default||n(239)).applyDecls(),o=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(40),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l);t.default=(0,r.connect)(function(e){return{errors:s.getBatch(e).error?[s.getBatch(e).error.message]:[]}})(o.default)},1421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=(n(816).default||n(816)).applyDecls(),o=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(40),s=n(149),u=n(169);t.default=(0,r.connect)(function(e,t){var n=t.match.params.html5Id;return{html5:(0,s.getById)((0,l.getHtml5)(e),n),creativesMap:(0,s.getCreativesMap)((0,l.getHtml5)(e))}},function(e){return{toggleCreative:function(t){e((0,u.toggleHtml5Creative)(t))},onBackClick:function(t){e((0,u.cancelSelectedCreatives)(t))}}})(o.default)},1422:function(e,t){},1423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=(n(1424),(n(818).default||n(818)).applyDecls()),o=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(40),s=n(149);t.default=(0,r.connect)(function(e,t){return{creative:(0,s.getCreativeById)((0,l.getHtml5)(e),t.id)}})(o.default)},1424:function(e,t){},1425:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=(n(1426),(n(819).default||n(819)).applyDecls()),o=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(40),s=n(149),u=n(169),a=n(130);t.default=(0,a.withRouter)((0,r.connect)(function(e,t){return{creativeIds:(0,s.getById)((0,l.getHtml5)(e),t.html5Id).creatives}},function(e,t){return{onSelectClick:function(n){e((0,u.applySelectedCreatives)(t.html5Id,n)),t.history.goBack()},onCancelClick:function(n){e((0,u.cancelSelectedCreatives)(n)),t.history.goBack()}}})(o.default))},1426:function(e,t){},1427:function(e,t){},1428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88),i=n(238);t.default={loadPreview:function(e,t){return(0,r.html5Request)({path:"/rest/html5/creative/"+e+"/preview",options:{method:"POST",body:{nonce:(0,i.getNonce)(),data:t}}})}}},143:function(e,t){},144:function(e,t){},145:function(e,t,n){"use strict";e.exports={error:{"animated-gif-not-allowed":"GIF-анимации не поддерживаются",default:"Что-то пошло не так.\nПопробуйте ещё раз или обратитесь в службу поддержки.","files-modify-conflict":"Файл с таким именем уже существует, выберите другое имя","image-not-found":"Файл не найден по ссылке","internal-server-error":"Произошла внутренняя ошибка сервиса. При обращении в службу поддержки сообщите, пожалуйста, идентификатор запроса: {0}","malformed-url":"Неверный адрес страницы. Введите корректный адрес","no-result":"К сожалению, конструктор не смог создать идеи креативов для страницы","not-allowed":"Доступ запрещен","not-found":"Возможно нужная вам страница была удалена. Если вы считаете, что страницы нет по нашей вине, напишите нам.","temporary-unavailable":"Конструктор временно недоступен","to-creatives":"Вернуться к списку креативов","unsupported-mediatype":"Файл этого формата не поддерживается","url-is-malformed-msg":"Некорректный адрес","url-is-unreachable-msg":"Введенный адрес недоступен. Проверьте, что ваш сайт работает"}}},146:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),l=r(o),s=n(4),u=r(s),a=n(0),c=(n(270),(n(147).default||n(147)).applyDecls()),f=r(c),d=(n(271),(n(148).default||n(148)).applyDecls()),p=r(d);n(274),n(275);var h={403:"not-allowed",404:"not-found",500:"default"};t.default=(0,a.decl)({block:"error",willInit:function(){this._code=this.props.code||this.props.match.params.code,h[this._code]||(this._code=500),this._message=this.props.message||h[this._code]},mods:function(){return i({},this.__base.apply(this,arguments),{code:this._code})},content:function(){return[this.props.backUrl&&this.props.backText?l.default.createElement(f.default,{key:"header",backUrl:this.props.backUrl,backText:this.props.backText}):"",l.default.createElement(p.default,{key:"content",code:this._code,message:this._message})]}},{propTypes:{id:u.default.string,message:u.default.string,code:u.default.number}})},147:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(9),n(36),n(144),n(93),n(11),n(8),n(6),(n(12).default||n(12)).applyDecls()),u=r(s),a=(n(41),n(42),n(119),n(120),n(121),(n(22).default||n(22)).applyDecls()),c=r(a);t.default=(0,l.decl)({block:"error",elem:"header",content:function(){return[o.default.createElement(c.default,{key:"all",type:"link",url:this.props.backUrl,theme:"ghost"},o.default.createElement(u.default,{size:"16",opacity:"60",theme:"arrow-left"}),this.props.backText)]}})},148:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(30),n(31),n(51),n(52),n(167),n(15),(n(44).default||n(44)).applyDecls()),a=r(u),c=function(){var e=n(3);return e().decl(n(145))("error")}(),f=r(c),d=function(){var e=n(3);return e().decl(n(29))("common")}(),p=r(d),h=function(){var e=n(3);return e().decl(n(45))("landings")}(),m=r(h);n(272),n(273),t.default=(0,l.decl)({block:"error",elem:"content",content:function(){return[o.default.createElement(s.default,{key:"image",block:"error",elem:"image"}),o.default.createElement(s.default,{key:"message",block:"error",elem:"info"},o.default.createElement(s.default,{key:"title",block:"error",elem:"title"},(0,p.default)("error")," ",this.props.code),o.default.createElement(s.default,{key:"message",block:"error",elem:"message"},(0,f.default)(this.props.message)),o.default.createElement(a.default,{key:"button",theme:"normal",type:"link",size:"m",url:(0,m.default)("troubleshooting-link"),target:"_blank"},(0,m.default)("write-message")))]}})},149:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return e.byId[t]}function l(e){return e.byCreativeId}function s(e,t){return e.byId[t].creatives.reduce(function(t,n){return e.byCreativeId[n].selected&&t++,t},0)}function u(e,t){return e.byCreativeId[t]}function a(e){return e.list.filter(function(t){return e.byId[t].selected}).map(function(t){return{id:t,creative_ids:e.byId[t].creatives.filter(function(t){return e.byCreativeId[t].shouldApply})}})}function c(e){return e.filters.sizes}Object.defineProperty(t,"__esModule",{value:!0});var f=n(659),d=r(f),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){var n=t.type,r=(0,b.getSharedData)(),o=r.filters&&r.filters.sizes,l={},s={list:[],byId:{},byCreativeId:{},filters:l,loading:{loaded:!1,offset:0,total:0},locked:!1};switch(o&&o.length>0&&(l.sizes=o.map(function(e){return e.w+"x"+e.h})),e=e||s,n){case m.ADD_HTML5:return(0,v.default)(e,{list:{$set:(0,d.default)(e.list.concat(t.items.map(function(e){return e.id})))},byId:{$merge:t.items.reduce(function(e,t){return e[t.id]=p({},t,{screenshotUrl:t.creatives[0].screenshot_url,creatives:t.creatives.map(function(e){return e.id})}),e},{})},byCreativeId:{$merge:t.items.reduce(function(e,t){var n=t.creatives.reduce(function(e,t){return e[t.id]=p({},t,{shouldApply:!1,selected:!1}),e},{});return p({},e,n)},{})},loading:{$merge:{loaded:!0,offset:t.offset,total:t.total}}});case m.CHANGE_HTML5_FILTERS:return p({},e,{list:[],byId:{},filters:t.filters,loading:{loaded:!1,offset:0,total:0}});case m.RESET_HTML5_FILTERS:return p({},e,{filters:l});case m.CHANGE_HTML5_ITEM_NAME:return(0,v.default)(e,{$byPath:{path:"byId."+t.id+".name",do:{$set:t.name}}});case m.TOGGLE_HTML5_ITEM:var u=e.byId[t.id],a=!u.selected,c=Boolean(e.filters&&e.filters.sizes);return(0,v.default)(e,{byId:{$merge:i({},t.id,p({},u,{selected:a}))},byCreativeId:{$merge:u.creatives.reduce(function(t,n){var r=e.byCreativeId[n],i=!c||!0===r.available;return t[n]=p({},r,{shouldApply:!!i&&a,selected:!!i&&a}),t},{})}});case m.TOGGLE_HTML5_CREATIVE:return(0,v.default)(e,{$byPath:{path:"byCreativeId."+t.creativeId+".selected",do:{$toggle:!0}}});case m.HTML5_CREATIVES_SELECTED:return(0,v.default)(e,{locked:{$set:!0}});case m.APPLY_SELECTED_CREATIVES:var f=0!==t.creativeIds.filter(function(t){return e.byCreativeId[t].selected}).length;return(0,v.default)(e,{byId:{$merge:i({},t.html5Id,p({},e.byId[t.html5Id],{selected:f}))},byCreativeId:{$merge:t.creativeIds.reduce(function(t,n){var r=e.byCreativeId[n];return t[n]=p({},r,{shouldApply:r.selected}),t},{})}});case m.CANCEL_SELECTED_CREATIVES:return(0,v.default)(e,{byCreativeId:{$merge:t.creativeIds.reduce(function(t,n){var r=e.byCreativeId[n];return t[n]=p({},r,{selected:r.shouldApply}),t},{})}});case m.UNLOCK_HTML5:return(0,v.default)(e,{locked:{$set:!1}});case m.DELETE_HTML5:return(0,v.default)(e,{list:{$set:e.list.filter(function(e){return e!==t.id})},loading:{$set:p({},e.loading,{offset:e.loading.offset-1})}});default:return e}},t.getById=o,t.getCreativesMap=l,t.getSelectedCreativesCountById=s,t.getCreativeById=u,t.getSelected=a,t.getSizes=c;var h=n(169),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),y=n(56),v=r(y),b=n(14)},150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(0);t.default=(0,o.decl)({block:"spin2"},{propTypes:{size:i.default.oneOf(["xxxs","xxs","xs","s","m","l"]),progress:i.default.bool,position:i.default.oneOf(["center"])}})},161:function(e,t,n){"use strict";function r(e){return(e=e?e+"-":"")+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},166:function(e,t){},167:function(e,t){},169:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return function(r){return _.default.getHtml5(e,t,n).then(function(e){return r(o(e.items,e.new_offset,e.total))},function(e){(0,k.default)((0,g.html5Url)("/error/"+e.status))})}}function o(e,t,n){return{type:S,items:e,offset:t,total:n}}function l(){return{type:R}}function s(e){return{type:O,filters:e}}function u(e,t){return{type:I,id:e,name:t}}function a(e,t){return function(n){return _.default.patchHtml5ItemName(e,t).then(function(){n(u(e,t))})}}function c(e){return{type:M,id:e}}function f(e){return{type:T,creativeIds:e}}function d(e){return function(t){return _.default.selectHtml5Creatives(e).then(function(){var n=e.reduce(function(e,t){return e.push(t.creative_ids),e},[]);(0,C.postMessage)("creatives-select",{creativeIds:n}),t(f(n))},function(e){(0,k.default)((0,g.html5Url)("/error/"+e.status))})}}function p(e,t){return{type:j,html5Id:e,creativeIds:t}}function h(e){return{type:A,creativeIds:e}}function m(e){return{type:w,creativeId:e}}function y(e){return{type:P,id:e}}function v(e){return function(t){_.default.deleteHtml5Item(e).then(function(){t({type:D,id:e})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.CANCEL_SELECTED_CREATIVES=t.APPLY_SELECTED_CREATIVES=t.DELETE_HTML5=t.UNLOCK_HTML5=t.SELECT_CREATIVES=t.HTML5_CREATIVES_SELECTED=t.TOGGLE_HTML5_CREATIVE=t.TOGGLE_HTML5_ITEM=t.CHANGE_HTML5_ITEM_NAME=t.RESET_HTML5_FILTERS=t.CHANGE_HTML5_FILTERS=t.ADD_HTML5=void 0,t.fetchHtml5=i,t.addHtml5=o,t.resetHtml5Filters=l,t.changeHtml5Filters=s,t.changeHtml5ItemName=u,t.patchHtml5ItemName=a,t.toggleHtml5Item=c,t.html5CreativesSelected=f,t.selectHtml5Creatives=d,t.applySelectedCreatives=p,t.cancelSelectedCreatives=h,t.toggleHtml5Creative=m,t.unlockHtml5=y,t.deleteHtml5Item=v;var b=n(1379),_=r(b),g=n(14),E=n(188),k=r(E),C=n(77),S=t.ADD_HTML5="ADD_HTML5",O=t.CHANGE_HTML5_FILTERS="CHANGE_HTML5_FILTERS",R=t.RESET_HTML5_FILTERS="RESET_HTML5_FILTERS",I=t.CHANGE_HTML5_ITEM_NAME="CHANGE_HTML5_ITEM_NAME",M=t.TOGGLE_HTML5_ITEM="TOGGLE_HTML5_ITEM",w=t.TOGGLE_HTML5_CREATIVE="TOGGLE_HTML5_CREATIVE",T=t.HTML5_CREATIVES_SELECTED="HTML5_CREATIVES_SELECTED",P=(t.SELECT_CREATIVES="SELECT_CREATIVES",t.UNLOCK_HTML5="UNLOCK_HTML5"),D=t.DELETE_HTML5="DELETE_HTML5",j=t.APPLY_SELECTED_CREATIVES="APPLY_SELECTED_CREATIVES",A=t.CANCEL_SELECTED_CREATIVES="CANCEL_SELECTED_CREATIVES"},188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){location.href=e}},192:function(e,t){},195:function(e,t){},197:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return e.byId[t]}function s(e){return e.list.map(function(t){return d({},e.byLoadId[t],{loadId:t})})}function u(e){return s(e).filter(function(e){return[g.default.UPLOADING].includes(e.status)})}function a(e){return s(e).filter(function(e){return[g.default.OK].includes(e.status)})}function c(e){return s(e).filter(function(e){return[g.default.OK,g.default.UPLOADING].includes(e.status)})}function f(e){return s(e).filter(function(e){return![g.default.OK].includes(e.status)})}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){var n=t.type,r={byLoadId:{},list:[],focused:null};switch(e=e||r,n){case y.SET_BATCH:return r;case h.CREATE_SOURCE_UPLOAD:return(0,b.default)(e,{byLoadId:o({},t.loadId,{$set:{status:g.default.UPLOADING,name:t.name}}),list:{$push:[t.loadId]}});case h.RESET_SOURCE_UPLOAD:return(0,b.default)(e,{byLoadId:o({},t.loadId,{$set:{status:g.default.UPLOADING,name:t.name}})});case h.SOURCE_UPLOADED:return(0,b.default)(e,{byLoadId:o({},t.loadId,{$set:d({},t.uploadedSource,{status:g.default.OK})})});case h.START_SOURCE_DELETING:return(0,b.default)(e,{byLoadId:o({},t.loadId,{$merge:{toBeDeleted:!0}})});case h.DELETE_SOURCE:return(0,b.default)(e,{byLoadId:{$unset:[t.loadId]},list:{$unsetByValue:t.loadId}});case h.SET_SOURCE_ERROR:return(0,b.default)(e,{$byPath:{path:"byLoadId."+t.loadId,do:{$merge:{status:400===t.error.status?g.default.ERROR_VALIDATION:g.default.ERROR_UPLOAD,error:t.error}}}});case h.SET_SOURCE_FOCUSED:return(0,b.default)(e,{focused:{$set:t.source.loadId}});case h.SET_SOURCE_BLURED:return(0,b.default)(e,{focused:{$set:null}});default:return e}},t.getById=l,t.getSortedList=s,t.getUploading=u,t.getUploaded=a,t.getWithoutErrors=c,t.getWithoutOk=f;var p=n(198),h=i(p),m=n(279),y=i(m),v=n(56),b=r(v),_=n(495),g=r(_)},198:function(e,t,n){"use strict";function r(e){return{type:_,loadId:e}}function i(e){return{type:g,loadId:e}}function o(e,t){return{type:k,loadId:e,name:t.name}}function l(e,t){return{type:C,loadId:e,name:t.name}}function s(e,t){return{type:E,loadId:e,error:t}}function u(e){return{type:R,source:e}}function a(e){return{type:I,source:e}}function c(e,t){return Boolean((0,b.getSources)(t).byLoadId[e])}function f(e,t){return function(n,r){return m.default.uploadSource(t).then(function(t){n(d(e,v.fromServer(t)))}).catch(function(t){c(e,r())&&n(s(e,t))})}}function d(e,t){return function(n,r){return n(c(e,r())?{type:S,uploadedSource:t,loadId:e}:{type:O,loadId:e})}}function p(e){return function(t){return t(r(e)),new Promise(function(n){setTimeout(function(){n(t(i(e)))},200)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.SET_SOURCE_BLURED=t.SET_SOURCE_FOCUSED=t.EMPTY_SOURCE_UPLOAD=t.SOURCE_UPLOADED=t.RESET_SOURCE_UPLOAD=t.CREATE_SOURCE_UPLOAD=t.SET_SOURCE_ERROR=t.DELETE_SOURCE=t.START_SOURCE_DELETING=void 0,t.startSourceDeleting=r,t.deleteSource=i,t.createSourceUpload=o,t.resetSourceUpload=l,t.setSourceError=s,t.setSourceFocused=u,t.setSourceBlured=a,t.uploadSource=f,t.applySource=d,t.requestSourceDeleting=p;var h=n(1383),m=function(e){return e&&e.__esModule?e:{default:e}}(h),y=n(799),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),b=n(40),_=t.START_SOURCE_DELETING="START_SOURCE_DELETING",g=t.DELETE_SOURCE="DELETE_SOURCE",E=t.SET_SOURCE_ERROR="SET_SOURCE_ERROR",k=t.CREATE_SOURCE_UPLOAD="CREATE_SOURCE_UPLOAD",C=t.RESET_SOURCE_UPLOAD="RESET_SOURCE_UPLOAD",S=t.SOURCE_UPLOADED="SOURCE_UPLOADED",O=t.EMPTY_SOURCE_UPLOAD="EMPTY_SOURCE_UPLOAD",R=t.SET_SOURCE_FOCUSED="SET_SOURCE_FOCUSED",I=t.SET_SOURCE_BLURED="SET_SOURCE_BLURED"},227:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),l=r(o),s=n(0),u=r(s),a=(n(103),(n(39).default||n(39)).applyDecls()),c=r(a);t.default=(0,s.decl)({block:"entity-constructor",willInit:function(){this.__base.apply(this,arguments),this.state={isLoading:!0,isParanjaShown:!1},this.onModalActionActiveChanged=this.onModalActionActiveChanged.bind(this),this.onParanjaClicked=this.onParanjaClicked.bind(this)},onModalActionActiveChanged:function(e){this.setState({isParanjaShown:e})},onParanjaClicked:function(){this.setState({isParanjaShown:!1})},content:function(){var e=[];return this.state.isLoading&&e.push(l.default.createElement(c.default,{key:"preloader"})),e=[].concat(i(e),[this.getEditor(),this.getFooter()]),this.state.isParanjaShown&&e.push(l.default.createElement(u.default,{block:"entity-constructor",elem:"paranja",attrs:{onClick:this.onParanjaClicked},key:"paranja"})),e}})},228:function(e,t){},229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0);t.default=(0,i.declMod)(function(e){return e.fit},{block:"preloader",mods:function(e){var t=e.fit;return r({},this.__base.apply(this,arguments),{fit:t})}})},230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=(0,r.decl)({block:"entity-constructor",elem:"footer"})},231:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=(0,r.decl)({block:"entity-constructor",elem:"actions"})},232:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(41),n(42),n(104),n(105),n(106),n(432),n(433),n(434),n(119),n(120),n(121),n(233),n(234),n(235),(n(22).default||n(22)).applyDecls()),u=r(s);t.default=(0,l.decl)({block:"navigation-link",tag:function(){return"span"},attrs:function(){var e=this;return{onClick:function(t){t.preventDefault(),e.props.onClick&&e.props.onClick(),e.props.history.push(e.props.url)}}},content:function(){return"link"===this.props.type?o.default.createElement(u.default,{theme:this.props.theme,mix:this.props.linkMix},this.props.children):this.props.children}})},233:function(e,t){},234:function(e,t){},235:function(e,t){},236:function(e,t,n){"use strict";e.exports={"add-creative":{"audio-reset-source":"Без аудиодорожки","back-to-creatives":"Вернуться к моим креативам","back-to-ideas":"Вернуться к идеям креативов","back-to-presets":"Вернуться к шаблонам","check-all":"Выбрать все","common-parameters-title":"Общие параметры","common-scope-title":"Общие параметры","create-count":function(e){return['Будет <i18n:dynamic project="tanker" keyset="dynamic" key="plural"><i18n:count>',e.count,"</i18n:count><i18n:one>создан</i18n:one><i18n:some>создано</i18n:some> <i18n:many>создано</i18n:many></i18n:dynamic> ","count",' <i18n:dynamic project="tanker" keyset="dynamic" key="plural"><i18n:count>',"count","</i18n:count><i18n:one>креатив</i18n:one><i18n:some>креатива</i18n:some> <i18n:many>креативов</i18n:many></i18n:dynamic>"]},"create-creatives":"Создать",crop:"Обрезать","crop-all-sizes":"Обрезать для всех размеров","crop-button-text":function(e){return["Обрезать для ",e.width,"x","height"]},"crop-title":"Обрезка изображения","crop-updated-sizes":"Обрезать для измененных размеров","default-name":"Новая группа креативов","disclaimer-title":"Предупреждение","idea-source":"Выбрать другое со страницы","library-source":"Выбрать из библиотеки","link-source":"Загрузить по ссылке","name-title":"Группа креативов","not-selected":"Не выбрано","parameters-title":"Параметры","preview-title":"Предварительный просмотр","previews-save-button-text":"Выбрать размеры и продолжить","previews-title":"Предварительный просмотр креативов","private-scope-title":function(e){return["Параметры размера ",e.width,"x","height"]},"recent-source":"Выбрать из ранее использованных","reset-source":"Сбросить","save-previews-button-title":"Выбрать размеры и продолжить","show-all-previews":"Показать все","sizes-title":"Размеры","upload-source":"Загрузить с компьютера","video-addition-name":"Новое видеодополнение","video-addition-title":"Креатив"}}},238:function(e,t,n){"use strict";function r(){return o}function i(e){o=e}Object.defineProperty(t,"__esModule",{value:!0}),t.getNonce=r,t.setNonce=i;var o=null},239:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=n(4),u=r(s),a=(n(446),(n(240).default||n(240)).applyDecls()),c=r(a);t.default=(0,l.decl)({block:"error-popup",willInit:function(){this.state={errorPopupVisible:!1},this.onClose=this.onClose.bind(this)},hasErrors:function(e){return e=e||this.props,e.errors&&Boolean(e.errors.length)},componentWillReceiveProps:function(e){this.hasErrors(e)&&e.errors!==this._prevErrors?this.setState({errorPopupVisible:!0}):this.hasErrors(e)||this.setState({errorPopupVisible:!1}),this._prevErrors=e.errors},onClose:function(){this.setState({errorPopupVisible:!1})},content:function(){if(this.state.errorPopupVisible)return o.default.createElement(c.default,{message:this.props.errors.join("\n"),onClose:this.onClose})}},{propTypes:{errors:u.default.array}})},240:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=n(4),a=r(u),c=(n(9),n(241),n(36),n(447),n(242),n(122),n(11),n(8),n(6),(n(12).default||n(12)).applyDecls()),f=r(c),d=(n(41),n(42),n(233),n(234),n(235),(n(22).default||n(22)).applyDecls()),p=r(d),h=(n(30),n(31),n(123),n(124),n(43),n(15),(n(44).default||n(44)).applyDecls()),m=r(h);n(448),n(449),n(450),n(451);var y=function(){var e=n(3);return e().decl(n(45))("landings")}(),v=r(y);t.default=(0,l.decl)({block:"error-popup",elem:"wrapper",content:function(){return[o.default.createElement(s.default,{key:"content",block:"error-popup",elem:"content"},o.default.createElement(s.default,{block:"error-popup",elem:"content-message"},this.props.message),o.default.createElement(s.default,{block:"error-popup",elem:"content-try-again"},(0,v.default)("try-again-message")),o.default.createElement(m.default,{size:"s",theme:"pseudo",type:"link",mix:{block:"error-popup",elem:"button"},url:(0,v.default)("troubleshooting-link"),target:"_blank"},(0,v.default)("write-message"))),o.default.createElement(s.default,{key:"info-icon",block:"error-popup",elem:"attention-icon"},o.default.createElement(f.default,{size:"16",theme:"attention"})),o.default.createElement(s.default,{key:"close-icon",block:"error-popup",elem:"close-icon"},o.default.createElement(p.default,{theme:"pseudo",onClick:this.props.onClose},o.default.createElement(f.default,{size:"10",theme:"cross-white",opacity:"40"})))]}},{propTypes:{message:a.default.string,onClose:a.default.func}})},241:function(e,t){},242:function(e,t){},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e*(2-e)},i=function(e,t,n,i){return t+(n-t)*r(e/i)},o=void 0;if("undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next){var l=new Map;o=function(e,t,n,r){var o=e.scrollTop,s=t-30,u=0,a=l.get(e),c=void 0,f=function t(){clearInterval(c),l.delete(e),e.removeEventListener("wheel",t),"function"==typeof r&&r()};a&&f(),c=setInterval(function(){u+=10,e.scrollTop=i(u,o,s,n),u===n&&f()},10),l.set(e,c),e.addEventListener("wheel",f)}}else o=function(e,t){e.scrollTop=t};t.scroll=o},248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=(0,r.declMod)(function(e){return e.autofocus},{block:"textinput",componentDidMount:function(){this.props.autofocus&&this._focusInput()},componentWillReceiveProps:function(e){e.autofocus&&this._focusInput()},_focusInput:function(){this._control.focus(),this.setState({focused:!0})}})},249:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),l=r(o),s=n(0),u=r(s);n(454),t.default=(0,s.declMod)(function(e){return e["enter-button"]},{block:"textinput",mods:function(){return i({},this.__base.apply(this,arguments),{"enter-button":!0})},content:function(){return[this.__base.apply(this,arguments),l.default.createElement(u.default,{key:"icon",size:"m",block:"textinput",elem:"enter",attrs:{onClick:this.props.onEnterClick}})]}})},250:function(e,t){},252:function(e,t){},255:function(e,t){},256:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(257),(n(126).default||n(126)).applyDecls()),u=r(s);t.default=(0,l.decl)({block:"entities-list",content:function(){return[o.default.createElement(u.default,{key:"header"})]}})},257:function(e,t){},258:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o,l=n(137),s=r(l),u=n(1),a=r(u),c=n(0),f=r(c),d=(n(468),(n(259).default||n(259)).applyDecls()),p=r(d),h=(n(470),(n(260).default||n(260)).applyDecls()),m=r(h),y=(n(261).default||n(261)).applyDecls(),v=r(y),b=(n(476),(n(263).default||n(263)).applyDecls()),_=r(b),g=(n(141),n(142),n(143),n(166),(n(66).default||n(66)).applyDecls()),E=r(g),k=function(){var e=n(3);return e().decl(n(264))("creatives-list")}(),C=r(k),S=["name",["only_campaigns_tied","sort_order","sizes"]],O=(o={},i(o,"name",p.default),i(o,"sort_order",v.default),i(o,"sizes",_.default),i(o,"only_campaigns_tied",(0,C.default)("only-campaigns-tied")),o);t.default=(0,c.decl)({block:"entities-list",elem:"filters",willInit:function(){this.state=this.props.values||{},this.onFiltersChange=(0,s.default)(this.onFiltersChange.bind(this),250),this.onFilterChange=this.onFilterChange.bind(this),this.onCheckboxFilterChange=this.onCheckboxFilterChange.bind(this)},getFilterValue:function(e){return this.state[e]},getFiltersMap:function(){var e=this;return Object.keys(this.state).reduce(function(t,n){return e.state[n]&&(t[n]=e.state[n]),t},{})},onFiltersChange:function(){this.props.onFiltersChange(this.getFiltersMap())},onFilterChange:function(e,t){this.setState(i({},e,t)),this.onFiltersChange()},onCheckboxFilterChange:function(e){this.setState(i({},e,!this.state[e]||null)),this.onFiltersChange()},renderFilter:function(e){var t=this;if(Array.isArray(e))return a.default.createElement(m.default,{key:e.join(",")},e.filter(function(e){return t.props.filters.includes(e)}).map(function(e){return a.default.createElement(f.default,{key:e,block:"entities-list",elem:"filter-group-item"},t.renderFilter(e))}));if(!this.props.filters.includes(e))return"";var n=O[e];if("function"==typeof n){var r=this.onFilterChange.bind(this,e);return a.default.createElement(n,{key:e,value:this.state[e],onFilterChange:r})}var i=this.onCheckboxFilterChange.bind(this,e);return a.default.createElement(E.default,{key:e,theme:"normal",size:"s",mix:{block:"entities-list",elem:"filter-checkbox"},onChange:i,checked:Boolean(this.getFilterValue(e))},n)},content:function(){var e=this;return S.map(function(t){return e.renderFilter(t)})}})},259:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(9),n(469),n(36),n(11),n(8),(n(6).default||n(6)).applyDecls()),a=r(u),c=(n(79),n(78),n(92),n(65),(n(194).default||n(194)).applyDecls()),f=r(c);t.default=(0,l.decl)({block:"entities-list",elem:"filter-name",willInit:function(){this.state={nameFieldIsVisible:!1,name:this.props.value||""},this.onNameToggle=this.onNameToggle.bind(this),this.onNameChange=this.onNameChange.bind(this)},onNameChange:function(e){this.setState({name:e}),this.props.onFilterChange(e)},onNameToggle:function(){var e=this.state.nameFieldIsVisible&&!this.state.name;this.setState({nameFieldIsVisible:!e})},content:function(){return this.state.nameFieldIsVisible?o.default.createElement(s.default,{block:"entities-list",elem:"filter-name-field"},o.default.createElement(f.default,{theme:"normal",size:"s",hasClear:!0,autoFocus:!0,text:this.state.name,onBlur:this.onNameToggle,onChange:this.onNameChange})):o.default.createElement(s.default,{attrs:{onClick:this.onNameToggle},block:"entities-list",elem:"filter-name-icon"},o.default.createElement(a.default,{theme:"search",size:"16"}))}})},260:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(9),n(471),n(36),n(11),n(8),(n(6).default||n(6)).applyDecls()),a=r(u),c=(n(46),n(53),n(37),n(80),(n(25).default||n(25)).applyDecls()),f=r(c);t.default=(0,l.decl)({block:"entities-list",elem:"filter-group",willInit:function(){this.state={filtersIsVisible:!1},this.onFiltersToggle=this.onFiltersToggle.bind(this),this.setIconRef=this.setIconRef.bind(this),this.onOutsideClick=this.onOutsideClick.bind(this)},onFiltersToggle:function(){this.setState({filtersIsVisible:!this.state.filtersIsVisible})},setIconRef:function(e){this._icon=e},onOutsideClick:function(){this.setState({filtersIsVisible:!1})},content:function(){return[o.default.createElement(f.default,{key:"popup",autoclosable:!0,theme:"normal",mix:{block:"entities-list",elem:"filter-group-popup"},directions:["bottom-left","bottom-center","bottom-right"],visible:this.state.filtersIsVisible,onOutsideClick:this.onOutsideClick,anchor:this._icon},this.props.children),o.default.createElement(s.default,{key:"icon",attrs:{onClick:this.onFiltersToggle,ref:this.setIconRef},block:"entities-list",elem:"filter-group-icon"},o.default.createElement(a.default,{theme:"filter",size:"16"}))]}})},261:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(336),n(337),n(472),n(473),n(474),n(475),n(338),(n(262).default||n(262)).applyDecls()),a=r(u),c=function(){var e=n(3);return e().decl(n(110))("gallery")}(),f=r(c),d=function(){var e=n(3);return e().decl(n(68))("html5")}(),p=r(d);t.default=(0,l.decl)({block:"entities-list",elem:"filter-sort",willInit:function(){this.state={sort:this.props.value||"desc"},this.onChange=this.onChange.bind(this)},onChange:function(e){this.setState({sort:e.target.value}),this.props.onFilterChange(e.target.value)},content:function(){return[o.default.createElement(s.default,{key:"title",block:"entities-list",elem:"filter-group-title",tone:"default",theme:"normal",size:"s",onChange:this.onChange},(0,p.default)("sort-title")),o.default.createElement(a.default,{key:"radio",tone:"default",theme:"normal",size:"s",vertical:!0,value:this.state.sort,onChange:this.onChange},o.default.createElement(a.default.Radio,{value:"desc"},(0,f.default)("desc-order")),o.default.createElement(a.default.Radio,{value:"asc"},(0,f.default)("asc-order")))]}})},262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0);t.default=(0,i.declMod)(function(e){return e.vertical},{block:"radiobox",mods:function(e){var t=e.vertical;return r({},this.__base.apply(this,arguments),{vertical:t})}})},263:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(81),n(82),n(332),function(){var e=n(3);e().decl(n(67))("menu")}(),n(47),(n(125).default||n(125)).applyDecls()),a=r(u),c=n(14),f=function(){var e=n(3);return e().decl(n(68))("html5")}(),d=r(f),p=["160x600","240x400","240x600","300x250","300x300","300x500","300x600","320x50","320x100","320x480","336x280","480x320","728x90","970x250","1000x120"],h=["1456x180","728x90","640x134"],m=["320x50","320x67","640x100","640x134"];t.default=(0,l.decl)({block:"entities-list",elem:"filter-sizes",willInit:function(){var e=(0,c.getSharedData)(),t=Boolean(e.areFiltersDisabled),n={};this.props.value&&(n=this.props.value.reduce(function(e,t){return e[t]=!0,e},{})),this.state={checkedSizes:n,isSizeFiltersBlocked:t},this.onChange=this.onChange.bind(this)},onChange:function(e,t){var n=this.state.checkedSizes;n[t]?delete n[t]:n[t]=!0,this.setState({sizes:n});var r=Object.keys(n);this.props.onFilterChange(r.length?r:null)},content:function(){var e=this,t=(0,c.getSharedData)(),n=p;"CPM_YNDX_FRONTPAGE"===t.productType&&(n=h),"CPM_GEOPRODUCT"===t.productType&&(n=m);var r=Math.ceil(n.length/2),i=[n.slice(0,r),n.slice(r,n.length)];return[o.default.createElement(s.default,{key:"title",block:"entities-list",elem:"filter-group-title",tone:"default",theme:"normal",size:"s",onChange:this.onChange},(0,d.default)("sizes-title")),o.default.createElement(s.default,{key:"sizes-list",block:"entities-list",elem:"filter-sizes-list"},i.map(function(t,n){return o.default.createElement(a.default,{key:n,mix:{block:"entities-list",elem:"filter-sizes-menu"},theme:"normal",size:"xs",type:"check",onClick:e.onChange,val:Object.keys(e.state.checkedSizes)},t.map(function(t){return o.default.createElement(a.default.Item,{disabled:e.state.isSizeFiltersBlocked,key:t,val:t},t)}))}))]}})},264:function(e,t,n){"use strict";e.exports={"creatives-list":{"add-creatives":function(e){return n(785)({count:e.count,one:"Добавить выбранный",some:"Добавить выбранные",many:"Добавить выбранные",none:"Добавить выбранный"})},"add-video-addition":"Добавить креатив к объявлению","all-sizes-button":"Выбрать размеры","campaigns-dropdown-label":"Кампании, в которых используется","cancel-and-return":"Отмена","create-from-batch":"Создать на основе","creative-remove-confirm-description":"Вы действительно хотите удалить группу креативов?","creative-remove-tooltip":"Удалить","date-sort-asc":"Сначала старые","date-sort-desc":"Сначала новые","export-excel":"Сохранить список в XLS",filter:"Фильтр","filtered-items":function(e){return['(<i18n:dynamic project="tanker" keyset="dynamic" key="plural">     <i18n:count>',e.count,"</i18n:count>     <i18n:one>Отфильтрован</i18n:one>     <i18n:some>Отфильтровано</i18n:some>      <i18n:many>Отфильтровано</i18n:many> </i18n:dynamic> ","count",' <i18n:dynamic project="tanker" keyset="dynamic" key="plural">     <i18n:count>',"count","</i18n:count>     <i18n:one>размер</i18n:one>     <i18n:some>размера</i18n:some>      <i18n:many>размеров</i18n:many> </i18n:dynamic>)"]},"get-link-dropdown-label":"Получить ссылку","items-not-found":function(e){return['Здесь пока пусто, самое время что-нибудь <a class="link link_theme_normal" href="',e.presetsUrl,'">создать</a>']},"only-campaigns-tied":"Только используемые","parameters-dropdown-label":"Параметры","picked-in-total-count":function(e){return[e.picked," из ","total"]},"rename-dropdown-label":"Переименовать","selected-sizes-button":function(e){return['<i18n:dynamic project="tanker" keyset="dynamic" key="plural"><i18n:one>Выбран</i18n:one><i18n:many>Выбрано</i18n:many><i18n:some>Выбрано</i18n:some><i18n:count>',e.picked,"</i18n:count></i18n:dynamic> ","picked"," из ","total"," размеров"]},size:"Размер",title:"Конструктор креативов"}}},265:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(4),s=r(l),u=n(0),a=r(u),c=(n(103),(n(39).default||n(39)).applyDecls()),f=r(c),d=(n(63),n(64),n(195),n(69),n(70),(n(33).default||n(33)).applyDecls()),p=r(d),h=(n(479),(n(266).default||n(266)).applyDecls()),m=r(h);n(480);t.default=(0,u.decl)({block:"infinite-list",willInit:function(){this._scope={},this.state={limit:this.props.limit||50,initiallyLoaded:!1,isLoadingMore:!1},this.setWrapperRef=this.setWrapperRef.bind(this),this.setScopeRef=this.setScopeRef.bind(this),this.onScroll=this.onScroll.bind(this),this._requestInitially=this._requestInitially.bind(this)},_requestInitially:function(){var e=this;this.props.requestMore(this.props.offset,this.state.limit,this.props.filters).then(function(){e.setState({initiallyLoaded:!0})})},componentWillReceiveProps:function(e){var t=this;e.filters!==this.props.filters?this.setState({initiallyLoaded:!1},function(){t._requestInitially()}):e.items&&e.items.length!==this.props.items.length&&this.setState({isLoadingMore:!1})},componentDidMount:function(){this._requestInitially()},onScroll:function(){var e=this._wrapper,t=e.querySelector(".infinite-list__item"),n=e.scrollTop+e.offsetHeight>=e.scrollHeight-t.offsetHeight,r=this.props.offset<this.props.total;n&&!this.state.isLoadingMore&&r&&(this.setState({isLoadingMore:!0}),this.props.requestMore(this.props.offset,this.state.limit,this.props.filters))},setWrapperRef:function(e){this._wrapper&&this._wrapper.removeEventListener("scroll",this.onScroll),this._wrapper=e,this._wrapper&&this._wrapper.addEventListener("scroll",this.onScroll)},setScopeRef:function(e){this._scope.dom=e},content:function(){var e=this.state.initiallyLoaded&&0===this.props.items.length,t=e&&this.props.emptyLabel;return[this.state.initiallyLoaded?null:o.default.createElement(f.default,{key:"preloader"}),o.default.createElement(a.default,{key:"wrapper",block:"infinite-list",elem:"wrapper",attrs:{ref:this.setWrapperRef}},t?o.default.createElement(a.default,{block:"html5",elem:"empty-message"},this.props.emptyLabel):o.default.createElement(m.default,{key:"content",attrs:{ref:this.setScopeRef},items:this.props.items,FirstItem:this.props.FirstItem,Item:this.props.Item,scope:this._scope},this.props.children),o.default.createElement(a.default,{block:"infinite-list",elem:"scroll-spin"},o.default.createElement(p.default,{size:"s",progress:this.state.isLoadingMore})))]}},{propTypes:{requestMore:s.default.func.isRequired,items:s.default.array.isRequired,offset:s.default.number.isRequired,limit:s.default.number,Item:s.default.func.isRequired,FirstItem:s.default.func}})},266:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(0);t.default=(0,l.decl)({block:"infinite-list",elem:"list",attrs:function(e){return e.attrs},content:function(){var e=this,t=this.props.items||[];return[this.props.children,this.props.FirstItem?o.default.createElement(this.props.FirstItem,{key:"first-item",mix:{block:"infinite-list",elem:"item"}}):""].concat(r(t.map(function(t){return o.default.createElement(e.props.Item,{key:t,id:t,scope:e.props.scope})})))}})},267:function(e,t){},268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=(0,r.declMod)(function(e){return e.autoselect},{block:"textinput",componentDidMount:function(){this.props.autoselect&&this._selectInput()},componentWillReceiveProps:function(e){e.autoselect&&this._selectInput()},_selectInput:function(){this._control.select(),this.setState({selected:!0})}})},269:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(9),n(36),n(144),n(93),n(11),n(8),n(6),(n(12).default||n(12)).applyDecls()),a=r(u),c=n(90),f=r(c),d=(n(267),(n(127).default||n(127)).applyDecls()),p=r(d);n(492),n(493),t.default=(0,l.decl)({block:"entities-preview",mods:function(){return{"has-controls":Boolean(this.props.entity.url),"has-footer":Boolean(this.props.Footer)}},content:function(){return[o.default.createElement(s.default,{key:"header",block:"entities-preview",elem:"header"},o.default.createElement(s.default,{block:"entities-preview",elem:"header-back"},o.default.createElement(f.default,{key:"all",type:"link",url:this.props.backUrl,onClick:this.props.onBackClick,theme:"ghost"},o.default.createElement(a.default,{size:"16",opacity:"60",theme:"arrow-left"})," ",this.props.backText)),o.default.createElement(s.default,{block:"entities-preview",elem:"header-title"},this.props.entity.name)),this.props.PreviewSidebar?o.default.createElement(s.default,{key:"preview-sidebar",block:"entities-preview",elem:"preview-sidebar"},this.props.PreviewSidebar):"",o.default.createElement(s.default,{key:"preview",block:"entities-preview",elem:"preview"},o.default.createElement(s.default,{block:"entities-preview",elem:"preview-area",attrs:{ref:this.setPreviewWrapperRef}},this.props.Preview),this.props.entity.url?o.default.createElement(s.default,{block:"entities-preview",elem:"controls"},o.default.createElement(p.default,{id:this.props.entity.id,url:this.props.entity.url})):""),this.props.Footer?o.default.createElement(s.default,{key:"footer",block:"entities-preview",elem:"footer"},this.props.Footer):""]}})},270:function(e,t){},271:function(e,t){},272:function(e,t){},273:function(e,t){},274:function(e,t){},275:function(e,t){},276:function(e,t){},277:function(e,t){},278:function(e,t){},279:function(e,t,n){"use strict";function r(e){return{type:v,name:e}}function i(){return{type:g}}function o(e){return{type:b,error:e}}function l(){return{type:_}}function s(){return{type:m}}function u(){return{type:y}}function a(){return function(e,t){return e(s()),e(l()),f.default.saveBatch(h.toServer(t())).then(function(){window.location.href=(0,d.html5Url)("/")}).catch(function(t){e(o(t)),e(u())})}}Object.defineProperty(t,"__esModule",{value:!0}),t.SET_BATCH=t.RESET_BATCH_ERROR=t.SET_BATCH_ERROR=t.CHANGE_BATCH_NAME=t.END_SAVE_BATCH=t.START_SAVE_BATCH=void 0,t.changeBatchName=r,t.setBatch=i,t.setBatchError=o,t.resetBatchError=l,t.startSaveBatch=s,t.endSaveBatch=u,t.saveBatch=a;var c=n(1381),f=function(e){return e&&e.__esModule?e:{default:e}}(c),d=n(14),p=n(1382),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),m=t.START_SAVE_BATCH="START_SAVE_BATCH",y=t.END_SAVE_BATCH="END_SAVE_BATCH",v=t.CHANGE_BATCH_NAME="CHANGE_BATCH_NAME",b=t.SET_BATCH_ERROR="SET_BATCH_ERROR",_=t.RESET_BATCH_ERROR="RESET_BATCH_ERROR",g=t.SET_BATCH="SET_BATCH"},29:function(e,t,n){"use strict";e.exports={common:{add:"Добавить",apply:"Применить",archive:"Архивировать",back:"Назад",cancel:"Отменить","confirmation-message":"Вы точно уверены, что хотите данное действие?",copy:"Создать на основе",edit:"Изменить",error:"Ошибка","http-request-error":"Произошла ошибка. Попробуйте ещё раз.",preview:"Посмотреть",save:"Сохранить","search-placeholder":"Найти",select:"Выбрать",selected:"Выбрано","service-name":"Canvas","try-again":"Попробовать ещё раз",upload:"Загрузить"}}},299:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){var e=n(3);return e().decl(n(29))("common")}(),o=r(i),l=function(){var e=n(3);return e().decl(n(68))("html5")}(),s=r(l);t.default={common:o.default,html5:s.default}},30:function(e,t){},31:function(e,t){},319:function(e,t){},323:function(e,t,n){"use strict";function r(){return o}function i(e){o=e}Object.defineProperty(t,"__esModule",{value:!0}),t.getStaticHost=r,t.setStaticHost=i;var o=null},332:function(e,t){},334:function(e,t){},336:function(e,t){},337:function(e,t){},342:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(4),s=n(0),u=(n(103),(n(39).default||n(39)).applyDecls()),a=r(u),c=(n(257),(n(126).default||n(126)).applyDecls()),f=r(c),d=(n(1386),(n(801).default||n(801)).applyDecls()),p=r(d),h=n(1387),m=r(h),y=n(40);t.default=(0,s.declMod)({type:"html5"},{block:"entities-list",willInit:function(){this.unlockHtml5=this.unlockHtml5.bind(this),window.addEventListener("message",this.unlockHtml5)},unlockHtml5:function(e){"unlock"===e.data.type&&this.props.unlockHtml5()},componentWillReceiveProps:function(e){this._wasUnlocked=this.props.locked&&!e.locked},componentWillUnmount:function(){window.removeEventListener("message",this.unlockHtml5)},content:function(){return[this.props.locked?o.default.createElement(a.default,{key:"preloader"}):"",o.default.createElement(f.default,{key:"header",active:this.props.active,filters:["name","sort_order","sizes"],filtersValues:(0,y.getHtml5)(this.context.store.getState()).filters||{},links:["html5","archive"],onFiltersChange:this.props.changeHtml5Filters}),o.default.createElement(m.default,{key:"html5",filters:this.props.filters,emptyLabel:this.props.emptyLabel,hasAddItem:this.props.hasAddItem}),o.default.createElement(p.default,{key:"footer",wasUnlocked:this._wasUnlocked,hasActionButton:this.props.hasActionButton,selected:this.props.selected,onSelect:this.props.selectHtml5Creatives})]}},{contextTypes:{store:l.PropTypes.object}})},343:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(9),n(496),n(1408),n(36),n(252),n(497),n(11),n(8),n(6),(n(12).default||n(12)).applyDecls()),a=r(u),c=(n(811).default||n(811)).applyDecls(),f=r(c),d=(n(141),n(142),n(143),n(166),(n(66).default||n(66)).applyDecls()),p=r(d),h=(n(41),n(42),n(104),n(105),n(106),(n(22).default||n(22)).applyDecls()),m=r(h),y=(n(46),n(53),n(37),n(80),(n(25).default||n(25)).applyDecls()),v=r(y),b=(n(267),(n(127).default||n(127)).applyDecls()),_=r(b),g=n(14);t.default=(0,l.decl)({block:"sources-list",elem:"item",willInit:function(){this.state={sharedPopupVisible:!1},this.getSourceSizeString=this.getSourceSizeString.bind(this),this.onRemoveClicked=this.onRemoveClicked.bind(this),this.onShareClicked=this.onShareClicked.bind(this),this.onOutsidePopupClick=this.onOutsidePopupClick.bind(this),this.setShareIconRef=this.setShareIconRef.bind(this),this.isFocused=this.isFocused.bind(this)},mods:function(){return{"is-deleting":this.props.source.toBeDeleted}},attrs:function(e){return e.attrs},onRemoveClicked:function(){this.props.source.toBeDeleted||this.props.requestSourceDeleting(this.props.source.loadId)},setShareIconRef:function(e){this.shareIconRef=e},onShareClicked:function(){this.setState({sharedPopupVisible:!this.state.sharedPopupVisible})},onOutsidePopupClick:function(){this.setState({sharedPopupVisible:!1})},getSourceSizeString:function(){var e=Boolean(this.props.source.source),t=e?this.props.source.source:this.props.source,n=this.props.source.width+"x"+this.props.source.height;if(this.props.toggleSource){var r=this.props.toggleSource.bind(this,this.props.source);return[this.fitsFilters()?o.default.createElement(p.default,{theme:"normal",size:"s",key:"checkbox",onChange:r,checked:this.props.source.selected},n):n," — ",o.default.createElement(s.default,{block:"sources-list",elem:"item-id",key:"id"},"ID: ",this.props.source.id),o.default.createElement(s.default,{block:"sources-list",elem:"item-share-icon",attrs:{ref:this.setShareIconRef},key:"share-icon"},o.default.createElement(m.default,{theme:"normal",icon:{theme:"external",opacity:20,size:"14"},onClick:this.onShareClicked})),o.default.createElement(v.default,{key:"popup",visible:this.state.sharedPopupVisible,scope:this.props.scope.dom,anchor:this.shareIconRef,autoclosable:!0,directions:["top-left"],onOutsideClick:this.onOutsidePopupClick,mix:{block:"sources-list",elem:"item-share-popup"},theme:"normal"},this.state.sharedPopupVisible?o.default.createElement(_.default,{url:(0,g.htmlPublicUrl)(this.props.source.id+"/preview")}):"")]}return t.name+" — "+n},isFocused:function(){return this.props.source[this.props.sourceId]===this.props.focusedSource},fitsFilters:function(){return!!this.archive||(void 0===this.props.source.available||this.props.source.available)},content:function(){return[o.default.createElement(f.default,{key:"preview",mods:{disabled:!this.fitsFilters(),focused:this.isFocused()},source:this.props.source}),o.default.createElement(s.default,{key:"actions",block:"sources-list",elem:"item-actions"},o.default.createElement(s.default,{block:"sources-list",elem:"item-size"},this.getSourceSizeString()),this.props.requestSourceDeleting?o.default.createElement(s.default,{block:"sources-list",elem:"item-trash"},o.default.createElement(a.default,{theme:"trash",size:"16",opacity:20,attrs:{onClick:this.onRemoveClicked}})):"")]}})},344:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(1418),(n(815).default||n(815)).applyDecls()),u=r(s);t.default=(0,l.decl)({block:"batch-filters",content:function(){var e=this;return this.props.sources.map(function(t){return o.default.createElement(u.default,{key:t[e.props.sourceId],sourceId:e.props.sourceId,requestSourceDeleting:e.props.requestSourceDeleting,focusedSource:e.props.focusedSource,setSourceFocused:e.props.setSourceFocused,setSourceBlured:e.props.setSourceBlured,toggleSource:e.props.toggleCreative,source:t})})}})},36:function(e,t){},380:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=n(208),a=r(u),c=n(299),f=r(c),d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),l=f.default.common("http-request-error"),s=!e||500===e;return r.message=s?l:(0,a.default)(n,"messages",(0,a.default)(n,"message",l)),r.name="ResponseError",r.response=n,r.status=e,r}return l(t,e),t}(Error);t.default=d},39:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(63),n(64),n(228),n(69),n(70),(n(33).default||n(33)).applyDecls()),u=r(s);n(427),n(428),(n(229).default||n(229)).applyDecls(),t.default=(0,l.decl)({block:"preloader",content:function(){return o.default.createElement(u.default,{mix:{block:"preloader",elem:"spin"},size:"m",progress:!0})}})},40:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.html5}function o(e){return e.batch}function l(e){return e.sources}Object.defineProperty(t,"__esModule",{value:!0}),t.getHtml5=i,t.getBatch=o,t.getSources=l;var s=n(155),u=n(149),a=r(u),c=n(1380),f=r(c),d=n(197),p=r(d),h=(0,s.combineReducers)({html5:a.default,batch:f.default,sources:p.default});t.default=h},41:function(e,t){},42:function(e,t){},425:function(e,t){},427:function(e,t){},428:function(e,t){},429:function(e,t){},43:function(e,t){},430:function(e,t){},431:function(e,t){},432:function(e,t){},433:function(e,t){},434:function(e,t){},435:function(e,t){},436:function(e,t){},446:function(e,t){},447:function(e,t){},448:function(e,t){},449:function(e,t){},45:function(e,t,n){"use strict";e.exports={landings:{"back-to-turbo":"К библиотеке турбо-страниц","copy-link":"Копировать ссылку","copy-link-success":"Ссылка скопирована","direct-title-turbo":"Библиотека турбо-страниц","link-and-id":"Ссылка и ID","select-preset":"Выбрать шаблон","to-presets":"Перейти к шаблонам","troubleshooting-link":"https://yandex.ru/support/direct/troubleshooting/other.html","try-again-message":"Что-то пошло не так.\nПопробуйте ещё раз или обратитесь в службу поддержки.","write-message":"Написать сообщение"}}},450:function(e,t){},451:function(e,t){},453:function(e,t){},454:function(e,t){},455:function(e,t){},456:function(e,t){},457:function(e,t){},458:function(e,t){},46:function(e,t){},466:function(e,t){},467:function(e,t){},468:function(e,t){},469:function(e,t){},470:function(e,t){},471:function(e,t){},472:function(e,t){},473:function(e,t){},474:function(e,t){},475:function(e,t){},476:function(e,t){},478:function(e,t){},479:function(e,t){},480:function(e,t){},481:function(e,t){},482:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(60),o=r(i),l=n(213),s=r(l),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),c=r(a),f=n(0),d=r(f),p=(n(192),(n(91).default||n(91)).applyDecls()),h=r(p),m=(n(9),n(334),n(242),n(122),n(93),n(250),n(483),n(484),n(11),n(8),n(6),n(6),(n(12).default||n(12)).applyDecls()),y=r(m),v=(n(30),n(31),n(123),n(124),n(43),(n(15).default||n(15)).applyDecls()),b=r(v),_=(n(46),n(53),n(37),n(80),(n(25).default||n(25)).applyDecls()),g=r(_),E=(n(81),n(109),n(82),function(){var e=n(3);e().decl(n(67))("menu")}(),(n(47).default||n(47)).applyDecls()),k=r(E),C=(n(103),(n(39).default||n(39)).applyDecls()),S=r(C),O=function(){var e=n(3);return e().decl(n(29))("common")}(),R=r(O),I=function(){var e=n(3);return e().decl(n(264))("creatives-list")}(),M=r(I);n(485),t.default=(0,f.decl)({block:"infinite-list-item",willInit:function(){this.state={optionsVisible:!1,isEditing:!1,isLoading:!1},this.setIconRef=this.setIconRef.bind(this),this.onOptionsIconClicked=this.onOptionsIconClicked.bind(this),this.onOutsideOptionPopupClick=this.onOutsideOptionPopupClick.bind(this),this.onRenameOptionClick=this.onRenameOptionClick.bind(this),this.onRenameReset=this.onRenameReset.bind(this),this.onRenamed=this.onRenamed.bind(this),this.onRenamedRetry=this.onRenamedRetry.bind(this)},setIconRef:function(e){this._icon=e},onOptionsIconClicked:function(){this.setState({optionsVisible:!0})},onOutsideOptionPopupClick:function(){this.setState({optionsVisible:!1})},onRenameOptionClick:function(){this.setState({optionsVisible:!1,isEditing:!0})},onRenameReset:function(){this.setState({isEditing:!1})},onRenamed:function(e){var t=this;e!==this.props.name?this.setState({isEditing:!1,isLoading:!0,editText:e},function(){t.props.onRenamed(e)}):this.setState({isEditing:!1})},onRenamedRetry:function(){this.onRenamed(this.state.editText)},willReceiveProps:function(e){e.name!==this.props.name?this.setState({isLoading:!1}):e.errors!==this.props.errors&&this.setState({isLoading:!1})},mods:function(){return u({},this.__base.apply(this,arguments),{"is-editing":this.state.isEditing})},_getImage:function(){return c.default.createElement(d.default,{key:"image",block:"infinite-list-item",elem:"image",attrs:{style:{backgroundImage:"url("+this.props.screenshot_url+")"}}})},_getPreviewLink:function(){return null},_getImageHover:function(){return[c.default.createElement(d.default,{key:"hover-dark",attrs:{onClick:this.onClick},block:"infinite-list-item",elem:"fader"},this._getHoverHeader()),this._getPreviewLink()]},_getInfo:function(){return c.default.createElement(d.default,{key:"info",block:"infinite-list-item",elem:"info"},c.default.createElement(h.default,{key:"title",mix:{block:"infinite-list-item",elem:"title"},onEditReset:this.onRenameReset,onEditComplete:this.onRenamed,isEditing:this.state.isEditing,name:this.props.name}))},_getMenu:function(){return[c.default.createElement(k.default.Item,{key:this.__self.OPTIONS.RENAME,val:this.__self.OPTIONS.RENAME,onClick:this.onRenameOptionClick},(0,M.default)("rename-dropdown-label"))]},_getOptions:function(){return[c.default.createElement(y.default,{key:"options-icon",mix:{block:"infinite-list-item",elem:"options"},attrs:{onClick:this.onOptionsIconClicked,ref:this.setIconRef},theme:"vertical-dots",size:"16x18",opacity:this.state.optionsVisible?100:60}),c.default.createElement(g.default,{key:"options-popup",visible:this.state.optionsVisible,anchor:this._icon,onOutsideClick:this.onOutsideOptionPopupClick,directions:["bottom-right","top-right"],theme:"normal",scope:this.props.scope.dom,autoclosable:!0,hasTail:!0},c.default.createElement(k.default,{size:"s",theme:"normal"},this._getMenu()))]},_getTitleHover:function(){return this.props.name},_getHoverHeader:function(){return null},_getInfoHover:function(){return c.default.createElement(d.default,{key:"hover-info",block:"infinite-list-item",elem:"hover-info"},c.default.createElement(d.default,{key:"hover-title",block:"infinite-list-item",elem:"hover-title"},this._getTitleHover()),this._getOptions())},_getError:function(){var e=!1,t=void 0,n="";return e=Boolean(this.props.errors&&(0,s.default)(this.props.errors)>0),e&&(t=!Array.isArray(this.props.errors)&&(0,o.default)(this.props.errors),n=t?Object.values(this.props.errors).join("\n"):this.props.errors.join("\n")),c.default.createElement(d.default,{key:"error",block:"infinite-list-item",elem:"error-wrapper",mods:{visible:e}},c.default.createElement(d.default,{block:"infinite-list-item",elem:"error"},c.default.createElement(y.default,{mix:{block:"infinite-list-item",elem:"error-close"},attrs:{onClick:this.props.onErrorClosed},theme:"cross-white",size:"12",opacity:"40"}),c.default.createElement("div",null,e&&n),t?"":c.default.createElement(b.default,{size:"s",theme:"pseudo",onClick:this.onRenamedRetry,mix:{block:"infinite-list-item",elem:"error-button"}},(0,R.default)("try-again"))))},content:function(){return[this.state.isLoading?c.default.createElement(S.default,{key:"preloader"}):null,c.default.createElement(d.default,{key:"wrapper",block:"infinite-list-item",elem:"wrapper"},this._getImage(),this._getImageHover(),this._getInfo(),this._getInfoHover(),this._getError())]}},{OPTIONS:{RENAME:"rename",ARCHIVE:"archive"}})},483:function(e,t){},484:function(e,t){},485:function(e,t){},486:function(e,t){},487:function(e,t){},488:function(e,t){},489:function(e,t){},490:function(e,t){},491:function(e,t){},492:function(e,t){},493:function(e,t){},494:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(4),p=r(d),h=n(130),m=n(1378),y=n(1384),v=n(1385),b=r(v),_=n(1395),g=r(_),E=(function(){var e=n(3);e().decl(n(145))("error")}(),(n(146).default||n(146)).applyDecls()),k=r(E),C=n(1396),S=r(C),O=n(1421),R=r(O),I=(n(1427),(n(820).default||n(820)).applyDecls()),M=r(I);n(276),n(277),n(278),(n(196).default||n(196)).applyDecls();var w=n(323),T=n(14),P=n(238),D=n(77),j=function(){var e=n(3);return e().decl(n(29))("common")}(),A=r(j),L=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),a(t,[{key:"componentDidMount",value:function(){(0,D.postMessage)("ready")}},{key:"render",value:function(){(0,w.setStaticHost)(this.props.appData.staticHost),(0,P.setNonce)(this.props.appData.nonce);var e={backUrl:(0,T.html5Url)("/"),backText:(0,A.default)("back")},t=function(t){return f.default.createElement(k.default,u({},t,e))},n=function(){return f.default.createElement(k.default,u({code:"404",message:"not-found"},e))};return f.default.createElement("div",{className:"app"},f.default.createElement(h.Switch,null,f.default.createElement(h.Route,{path:"/html5",exact:!0,component:b.default}),f.default.createElement(h.Route,{path:"/html5/error/:code",exact:!0,component:t}),f.default.createElement(h.Route,{path:"/html5/archive",exact:!0,component:g.default}),f.default.createElement(h.Route,{path:"/html5/add",exact:!0,component:S.default}),f.default.createElement(h.Route,{path:"/html5/preview/html5/:html5Id",exact:!0,component:R.default}),f.default.createElement(h.Route,{path:"/html5/:creativeId/preview",exact:!0,component:M.default}),f.default.createElement(h.Route,{path:"*",component:n})))}}]),t}(c.Component);L.propTypes={appData:p.default.object},L.childContextTypes={lang:p.default.string,sharedData:p.default.string},L.getInitialState=y.getInitialState,L.configureStore=m.configureStore,t.default=L},495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UPLOADING:"UPLOADING",OK:"OK",ERROR_VALIDATION:"ERROR_VALIDATION",ERROR_UPLOAD:"ERROR_UPLOAD"}},496:function(e,t){},497:function(e,t){},51:function(e,t){},52:function(e,t){},53:function(e,t){},56:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(311),l=r(o),s=n(162),u=r(s),a=n(409),c=r(a),f=n(606),d=r(f),p=n(607),h=r(p),m=n(410),y=r(m),v=n(27),b=r(v),_=n(411),g=r(_),E=n(609),k=r(E),C=n(610),S=(0,C.newContext)();S.extend("$byPath",function(e,t){return S(t,(0,k.default)({},e.path,e.do,Object))}),S.extend("$unsetByPath",function(e,t){var n=(0,g.default)(t);return(0,b.default)(e)||(e=[e]),(0,y.default)(e,function(e){(0,h.default)(n,e)}),n}),S.extend("$unsetByValue",function(e,t){return(0,b.default)(e)||(e=[e]),(0,d.default)(t,function(t){return void 0!==(0,c.default)(e,function(e){return(0,u.default)(e,t)})})}),S.extend("$initArray",function(e,t){return S(t||[],e)}),S.extend("$initAndPush",function(e,t){return S(t,{$initArray:{$push:(0,b.default)(e)?e:[e]}})}),S.extend("$toggle",function(e,t){return S(t,{$apply:function(e){return!e}})}),S.extend("$byId",function(e,t){if(e.path)return S(t,{$byPath:{path:e.path,do:{$byId:{key:e.key,id:e.id,fallback:e.fallback,do:e.do}}}});var n=e.key||"id",r=(0,l.default)(t,i({},n,e.id));return-1===r?S(t,e.fallback):S(t,i({},r,e.do))}),t.default=S},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0);t.default=(0,i.declMod)(function(e){return e.theme},{block:"icon",mods:function(e){var t=e.theme;return r({},this.__base.apply(this,arguments),{theme:t})}})},63:function(e,t){},64:function(e,t){},666:function(e,t){},67:function(e,t,n){"use strict";e.exports={menu:{archive:"Архивные",creatives:"Мои креативы",ideas:"Идеи креативов",presets:"Стандартные шаблоны",turbo:"Турбо-страницы"}}},670:function(e,t){},672:function(e,t){},68:function(e,t,n){"use strict";e.exports={html5:{"button-more":"Подробнее","button-repeat":"Повторить","button-upload":"Загрузить","creative-filter-label":"Показаны креативы с баннерами размеров","default-batch-name":"Новый креатив","dropzone-subtitle":'или нажмите «Загрузить». Перед загрузкой посмотрите <a class="link link_theme_normal" href="https://direct.yandex.ru/tooltip.html?id=cpm-campaign-creative-requirements&lang=ru" target="blank">технические требования</a>',"dropzone-subtitle-for-yndx-frontpage":'или нажмите «Загрузить». Перед загрузкой посмотрите <a class="link link_theme_normal" href="https://direct.yandex.ru/tooltip.html?id=cpm-campaign-frontpage-creative-requirements&lang=ru" target="blank">технические требования</a>',"dropzone-title":"Перетащите файлы с баннерами сюда","empty-archive-message":"Нет архивных креативов","no-relevant-creatives":"Нет подходящих креативов","select-creatives-count":"Выбрать все баннеры","selected-creatives-count":"Выбрано баннеров","sizes-title":"Размеры","sort-title":"Сортировка","status-error_upload":"Ошибка загрузки","status-error_validation":"Не отвечает требованиям","status-ok":"Загружено","status-uploading":"Загружается"}}},680:function(e,t){},681:function(e,t){},683:function(e,t){},684:function(e,t){},686:function(e,t){},687:function(e,t){},69:function(e,t){},691:function(e,t){},692:function(e,t){},70:function(e,t){},744:function(e,t){},745:function(e,t){},746:function(e,t){},747:function(e,t){},748:function(e,t){},749:function(e,t){},752:function(e,t){},753:function(e,t){},754:function(e,t){},764:function(e,t){},766:function(e,t){},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.postMessage=function(e,t){window.parent&&window.parent.postMessage(r({},t,{type:e}),"*")}},78:function(e,t){},79:function(e,t){},799:function(e,t,n){"use strict";function r(e){return e}function i(e){var t=new FormData;return t.append("attachment",e.source),t}Object.defineProperty(t,"__esModule",{value:!0}),t.fromServer=r,t.toServer=i},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(0);t.default=(0,o.decl)({block:"icon"},{propTypes:{id:i.default.string,url:i.default.string,style:i.default.object,direction:i.default.string,glyph:i.default.string,size:i.default.string}})},800:function(e,t){},801:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(30),n(31),n(107),n(108),n(51),n(52),n(43),n(15),(n(44).default||n(44)).applyDecls()),u=r(s),a=function(){var e=n(3);return e().decl(n(29))("common")}(),c=r(a),f=n(77);t.default=(0,l.decl)({block:"entities-list",elem:"footer",willInit:function(){this.state={progress:!1},this.select=this.select.bind(this),this.cancel=this.cancel.bind(this)},componentWillReceiveProps:function(e){e.wasUnlocked&&this.setState({progress:!1})},select:function(){this.setState({progress:!0}),this.props.onSelect(this.props.selected)},cancel:function(){(0,f.postMessage)("close")},content:function(){var e=[];return!1!==this.props.hasActionButton&&e.push(o.default.createElement(u.default,{key:"add",theme:"action",size:"s",mix:{block:"entities-list",elem:"footer-action-button"},progress:this.state.progress,disabled:!this.props.selected.length,onClick:this.select},(0,c.default)("add"))),e.push(o.default.createElement(u.default,{key:"cancel",theme:"normal",size:"s",onClick:this.cancel},(0,c.default)("cancel"))),e}})},802:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(478),(n(265).default||n(265)).applyDecls()),a=r(u),c=n(803),f=r(c),d=n(1390),p=r(d),h=(n(1394),(n(806).default||n(806)).applyDecls()),m=r(h);t.default=(0,l.decl)({block:"html5",mods:function(e){return{"has-filters":Boolean(e.filters&&e.filters.sizes)}},content:function(){var e=Boolean(this.props.filters&&this.props.filters.sizes);return[o.default.createElement(a.default,{key:"list",mix:{block:"html5",elem:"list"},requestMore:this.props.fetchHtml5,offset:this.props.offset,total:this.props.total,filters:this.props.filters,items:this.props.html5,emptyLabel:this.props.emptyLabel,FirstItem:!1===this.props.hasAddItem?null:m.default,Item:p.default},e?o.default.createElement(s.default,{key:"filter-notification",block:"html5",elem:"filters-label"},o.default.createElement(f.default,null)):"")]}})},803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(40),o=n(149),l=(n(1389),(n(804).default||n(804)).applyDecls()),s=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=(0,r.connect)(function(e){return{sizes:(0,o.getSizes)((0,i.getHtml5)(e))}})(s.default)},804:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){var e=n(3);return e().decl(n(68))("html5")}(),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=(0,r.decl)({block:"filter-label",content:function(){return this.props.sizes?(0,o.default)("creative-filter-label")+" "+this.props.sizes:null}})},805:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),l=r(o),s=n(0),u=r(s),a=n(90),c=r(a),f=(n(9),n(486),n(487),n(1392),n(488),n(11),n(8),(n(6).default||n(6)).applyDecls()),d=r(f),p=(n(81),n(109),n(82),function(){var e=n(3);e().decl(n(67))("menu")}(),(n(47).default||n(47)).applyDecls()),h=r(p),m=function(){var e=n(3);return e().decl(n(29))("common")}(),y=r(m),v=function(){var e=n(3);return e().decl(n(68))("html5")}(),b=r(v),_=n(14);n(1393),t.default=(0,s.declMod)({type:"html5"},{block:"infinite-list-item",willInit:function(){this.__base.apply(this,arguments),this.onClick=this.onClick.bind(this),this.onDeleteOptionClick=this.onDeleteOptionClick.bind(this)},mods:function(){return i({},this.__base.apply(this,arguments),{selected:this.props.selected,disabled:!this.props.available})},onClick:function(){!this.props.archive&&this.props.available&&this.props.onToggle()},onDeleteOptionClick:function(){this.props.onDelete()},_getPreviewLink:function(){var e="/preview/html5/"+this.props.id;return l.default.createElement(u.default,{key:"preview-link",block:"infinite-list-item",elem:"preview-link"},l.default.createElement(c.default,{key:"preview-link",type:"link",theme:"black",url:(0,_.html5Url)(e)},(0,y.default)("preview")))},_getImage:function(){return l.default.createElement(u.default,{key:"image",block:"infinite-list-item",elem:"image",attrs:{style:{backgroundImage:"url("+this.props.screenshotUrl+")"}}})},_getCreativeCounter:function(){return this.props.available?[l.default.createElement("div",{key:"message"},this.props.selected?(0,b.default)("selected-creatives-count"):(0,b.default)("select-creatives-count")),l.default.createElement("div",{key:"counter"},this.props.selectedCreativesCount+"/"+this.props.creatives.length)]:l.default.createElement("div",null,(0,b.default)("no-relevant-creatives"))},_getIconTheme:function(){return this.props.selected?this.props.selectedCreativesCount===this.props.creatives.length?"circle-checked":"circle-half-checked":"circle-unchecked"},_getHoverHeader:function(){return this.props.archive?null:l.default.createElement(u.default,{key:"fader-content",block:"infinite-list-item",elem:"fader-content"},this.props.available&&l.default.createElement(d.default,{mix:{block:"infinite-list-item",elem:"fader-icon"},key:"icon",theme:this._getIconTheme(),size:"30"}),l.default.createElement(u.default,{block:"infinite-list-item",elem:"fader-text"},this._getCreativeCounter()))},_getOptions:function(){return this.props.archive?null:this.__base.apply(this,arguments)},_getMenu:function(){return this.__base.apply(this,arguments).concat([l.default.createElement(h.default.Item,{key:this.__self.OPTIONS.ARCHIVE,val:this.__self.OPTIONS.ARCHIVE,onClick:this.onDeleteOptionClick},(0,y.default)("archive"))])}})},806:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=n(90),u=r(s),a=(n(9),n(489),n(122),n(490),n(11),n(8),n(6),(n(12).default||n(12)).applyDecls()),c=r(a),f=n(14);t.default=(0,l.decl)({block:"html5",elem:"item-add",content:function(){return o.default.createElement(u.default,{key:"item-add",type:"link",theme:"normal",mix:{block:"html5",elem:"item-add-link"},url:(0,f.html5Url)("/add")},o.default.createElement(c.default,{key:"icon",theme:"plus-big",opacity:"40",size:"48"}))}})},807:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),l=r(o),s=n(0),u=r(s),a=n(1400),c=r(a),f=n(1406),d=r(f),p=n(1409),h=r(p),m=n(1417),y=r(m),v=n(1419),b=r(v),_=n(1420),g=r(_);t.default=(0,s.decl)({block:"batch-editor",willInit:function(){this.state={droppable:!1},this.ref=null,this.wrapperRef=null,this.setRef=this.setRef.bind(this),this.setWrapperRef=this.setWrapperRef.bind(this),this.onDragEnter=this.onDragEnter.bind(this),this.onDropzoneDropOrLeave=this.onDropzoneDropOrLeave.bind(this)},setRef:function(e){this.ref=e},setWrapperRef:function(e){this.wrapperRef=e},mods:function(e){var t=e.mods;return i({},t,{droppable:this.state.droppable})},attrs:function(){return{ref:this.setRef,onDragEnter:this.onDragEnter}},onDragEnter:function(){this.state.droppable||this.setState({droppable:!0})},onDropzoneDropOrLeave:function(){this.setState({droppable:!1})},content:function(){return[l.default.createElement(u.default,{block:"batch-editor",elem:"left",key:"left"},l.default.createElement(y.default,{key:"batch-filters"})),l.default.createElement(u.default,{block:"batch-editor",elem:"content",key:"content"},l.default.createElement(u.default,{block:"batch-editor",elem:"content-wrapper",attrs:{ref:this.setWrapperRef}},l.default.createElement(g.default,null),l.default.createElement(b.default,{key:"editable-name",hasIcon:!0,mix:{block:"batch-editor",elem:"editable-name"}}),l.default.createElement(u.default,{block:"batch-editor",elem:"uploads"},l.default.createElement(c.default,{onDropzoneDropOrLeave:this.onDropzoneDropOrLeave,mix:{block:"batch-editor",elem:"dropzone"},key:"dropzone"}),l.default.createElement(h.default,{key:"sources-queue"}),l.default.createElement(d.default,{key:"sources-list",wrapperRef:this.wrapperRef}))))]}})},808:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=n(161),a=r(u),c=(n(30),n(31),n(51),n(52),n(167),(n(15).default||n(15)).applyDecls()),f=r(c),d=(n(9),n(1402),n(1403),n(1404),n(1405),n(122),n(11),n(8),n(6),(n(12).default||n(12)).applyDecls()),p=r(d),h=function(){var e=n(3);return e().decl(n(68))("html5")}(),m=r(h),y=n(14),v=n(465),b=r(v);t.default=(0,l.decl)({block:"dropzone",willInit:function(){this.state={visible:!1},this.setDropRef=this.setDropRef.bind(this),this.onDropAccepted=this.onDropAccepted.bind(this),this.onUploadClicked=this.onUploadClicked.bind(this)},attrs:function(e){return e.attrs},setDropRef:function(e){this._dropzone=e},onUploadClicked:function(){this._dropzone.open()},onDropAccepted:function(e){var t=this;e.forEach(function(e){var n=(0,a.default)("source");t.props.createSourceUpload(n,e),t.props.uploadSource(n,e)})},content:function(){var e=(0,y.getSharedData)(),t=e.productType,n=(0,m.default)("dropzone-subtitle");return"CPM_YNDX_FRONTPAGE"===t&&(n=(0,m.default)("dropzone-subtitle-for-yndx-frontpage")),o.default.createElement(b.default,{key:"drop",disableClick:!0,style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onDropAccepted:this.onDropAccepted,onDrop:this.props.onDropzoneDropOrLeave,onDragLeave:this.props.onDropzoneDropOrLeave,ref:this.setDropRef},o.default.createElement(s.default,{block:"dropzone",elem:"wrapper"},o.default.createElement(p.default,{theme:"upload",size:"40",opacity:"40"}),o.default.createElement(s.default,{block:"dropzone",elem:"text-wrapper"},o.default.createElement(s.default,{block:"dropzone",elem:"title"},(0,m.default)("dropzone-title")),o.default.createElement(s.default,{block:"dropzone",elem:"subtitle",attrs:{dangerouslySetInnerHTML:{__html:n}}}),o.default.createElement(f.default,{theme:"normal",size:"m",iconLeft:{mods:{theme:"upload"}},onClick:this.onUploadClicked},(0,m.default)("button-upload")))),o.default.createElement(s.default,{block:"dropzone",elem:"wrapper-droppable"},o.default.createElement(s.default,{block:"dropzone",elem:"droppable"},o.default.createElement(p.default,{theme:"upload-white",size:"60",opacity:"40"}),o.default.createElement(s.default,{block:"dropzone",elem:"text-wrapper"},o.default.createElement(s.default,{block:"dropzone",elem:"title"},(0,m.default)("dropzone-title"))))))}})},809:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(810),(n(343).default||n(343)).applyDecls()),u=r(s),a=n(243);t.default=(0,l.decl)({block:"sources-list",willInit:function(){this.sourceRefs={},this.scrollToFocusedSource=this.scrollToFocusedSource.bind(this),this.setSourceRef=this.setSourceRef.bind(this)},setSourceRef:function(e,t){this.sourceRefs[e]=t},componentWillReceiveProps:function(e){e.focusedSource&&this.props.focusedSource!==e.focusedSource&&this.scrollToFocusedSource(e.focusedSource)},scrollToFocusedSource:function(e){this.sourceRefs[e]&&(0,a.scroll)(this.props.wrapperRef,this.sourceRefs[e].offsetTop,180)},content:function(){var e=this;return this.props.sources.map(function(t){return o.default.createElement(u.default,{key:t.loadId,requestSourceDeleting:e.props.requestSourceDeleting,focusedSource:e.props.focusedSource,sourceId:"loadId",attrs:{ref:function(n){return e.setSourceRef(t.loadId,n)}},source:t})})}})},81:function(e,t){},810:function(e,t){},811:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),l=r(o),s=n(0),u=r(s),a=(n(63),n(64),n(228),n(69),n(70),n(33),(n(150).default||n(150)).applyDecls()),c=r(a);t.default=(0,s.decl)({block:"sources-list",elem:"item-preview",mods:function(e){var t=e.mods;return i({},t,{loaded:this.state.loaded})},willInit:function(){this.state={loaded:!1},this.setIframeRef=this.setIframeRef.bind(this)},setIframeRef:function(e){this.iframeRef=e},componentDidMount:function(){var e=this;this.iframeRef.addEventListener("load",function(){e.setState({loaded:!0})})},content:function(){return[l.default.createElement(u.default,{block:"sources-list",key:"wrapper",elem:"item-preview-wrapper"},l.default.createElement(u.default,{block:"sources-list",elem:"item-iframe",tag:"iframe",key:"iframe",attrs:{src:this.props.source.preview_url,style:{height:this.props.source.height,width:this.props.source.width},ref:this.setIframeRef}}),l.default.createElement(u.default,{block:"sources-list",elem:"item-stub",attrs:{style:{height:this.props.source.height,width:this.props.source.width,lineHeight:this.props.source.height+"px"}},key:"stub"},l.default.createElement(c.default,{mix:{block:"sources-list",elem:"item-stub-spinner"},size:"m",progress:!0})))]}})},812:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=n(465),u=r(s),a=(n(1411),(n(813).default||n(813)).applyDecls()),c=r(a);t.default=(0,l.decl)({block:"sources-queue",willInit:function(){this.setDropRef=this.setDropRef.bind(this),this.onDropAccepted=this.onDropAccepted.bind(this),this.setLoadIdForRepeat=this.setLoadIdForRepeat.bind(this),this.state={dropzone:null},this.loadIdForRepeat=null},setDropRef:function(e){this.setState({dropzone:e})},setLoadIdForRepeat:function(e){this.loadIdForRepeat=e},onDropAccepted:function(e){var t=e[0];this.props.resetSourceUpload(this.loadIdForRepeat,t),this.props.uploadSource(this.loadIdForRepeat,t)},mods:function(){return{empty:!this.props.sources.length}},content:function(){var e=this;return[this.props.sources.map(function(t){return o.default.createElement(c.default,{key:t.loadId,requestSourceDeleting:e.props.requestSourceDeleting,dropzone:e.state.dropzone,setLoadIdForRepeat:e.setLoadIdForRepeat,source:t})}),o.default.createElement(u.default,{key:"drop",disableClick:!0,style:{width:0,height:0},multiple:!1,onDropAccepted:this.onDropAccepted,ref:this.setDropRef})]}})},813:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(9),n(496),n(458),n(1412),n(1413),n(36),n(497),n(11),n(8),n(6),n(689),n(1414),n(1415),(n(12).default||n(12)).applyDecls()),a=r(u),c=n(495),f=r(c),d=(n(41),n(42),n(104),n(105),n(106),(n(22).default||n(22)).applyDecls()),p=r(d),h=(n(63),n(64),n(1416),n(69),n(70),n(33),(n(150).default||n(150)).applyDecls()),m=r(h),y=function(){var e=n(3);return e().decl(n(68))("html5")}(),v=r(y),b={ERROR:"#ff0000",SUCCESS:"#98ce60"};t.default=(0,l.decl)({block:"sources-queue",elem:"item",willInit:function(){this.state={hasError:!1,showError:!1},this.onToggleClick=this.onToggleClick.bind(this),this.onRemoveClicked=this.onRemoveClicked.bind(this),this.getCircleColor=this.getCircleColor.bind(this),this.onRepeatClick=this.onRepeatClick.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this)},mods:function(){return{"is-deleting":this.props.source.toBeDeleted}},getErrorMessage:function(){var e=this.props.source.error.message;return Array.isArray(e)||(e=[this.props.source.error.message]),e.join("\n")},onRemoveClicked:function(){this.props.source.toBeDeleted||this.props.requestSourceDeleting(this.props.source.loadId)},onRepeatClick:function(){this.props.setLoadIdForRepeat(this.props.source.loadId),this.props.dropzone.open()},componentWillReceiveProps:function(e){this.setState({hasError:[f.default.ERROR_UPLOAD,f.default.ERROR_VALIDATION].includes(e.source.status)})},onToggleClick:function(){this.setState({showError:!this.state.showError})},getCircleColor:function(){return[f.default.ERROR_UPLOAD,f.default.ERROR_VALIDATION].includes(this.props.source.status)?b.ERROR:this.props.source.status===f.default.OK?b.SUCCESS:void 0},content:function(){return[o.default.createElement(s.default,{block:"sources-queue",elem:"item-line",key:"first-line"},o.default.createElement(s.default,{block:"sources-queue",elem:"item-table",tag:"table"},o.default.createElement(s.default,{block:"sources-queue",elem:"item-tbody",tag:"tbody"},o.default.createElement(s.default,{block:"sources-queue",elem:"item-tr",tag:"tr"},o.default.createElement(s.default,{block:"sources-queue",elem:"item-name",tag:"td"},this.props.source.name),o.default.createElement(s.default,{block:"sources-queue",elem:"item-status",tag:"td"},this.props.source.status===f.default.UPLOADING?o.default.createElement(m.default,{mix:{block:"sources-queue",elem:"item-status-spinner"},size:"xxxs",progress:!0}):o.default.createElement(s.default,{block:"sources-queue",elem:"item-status-circle",attrs:{style:{backgroundColor:this.getCircleColor()}}}),(0,v.default)("status-"+this.props.source.status.toLowerCase())),o.default.createElement(s.default,{block:"sources-queue",elem:"item-toggle-error",tag:"td"},this.state.hasError?o.default.createElement(p.default,{theme:"normal",iconRight:{glyph:"type-arrow",direction:this.state.showError?"top":"bottom",size:"16"},text:(0,v.default)("button-more"),onClick:this.onToggleClick}):"")))),o.default.createElement(s.default,{block:"sources-queue",elem:"item-actions"},this.state.hasError?o.default.createElement(p.default,{theme:"normal",mix:{block:"sources-queue",elem:"item-repeat"},iconLeft:{glyph:"repeat",size:"16"},text:(0,v.default)("button-repeat"),onClick:this.onRepeatClick}):"",o.default.createElement(s.default,{block:"sources-queue",elem:"item-trash"},o.default.createElement(a.default,{theme:"trash",size:"16",opacity:20,attrs:{onClick:this.onRemoveClicked}})))),this.state.showError?o.default.createElement(s.default,{block:"sources-queue",elem:"item-line",mods:{border:!0},key:"second-line"},o.default.createElement(s.default,{key:"error-tail",block:"sources-queue",elem:"item-error-tail"}),o.default.createElement(s.default,{block:"sources-queue",key:"error",elem:"item-error"},this.getErrorMessage())):""]}})},814:function(e,t){},815:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(9),n(496),n(36),n(497),n(11),n(8),n(6),(n(12).default||n(12)).applyDecls()),a=r(u),c=n(495),f=r(c),d=(n(63),n(64),n(195),n(69),n(70),n(33),(n(150).default||n(150)).applyDecls()),p=r(d),h=(n(141),n(142),n(143),n(166),(n(66).default||n(66)).applyDecls()),m=r(h);t.default=(0,l.decl)({block:"batch-filters",elem:"item",willInit:function(){this.getHeight=this.getHeight.bind(this),this.getSourceSizeString=this.getSourceSizeString.bind(this),this.onRemoveClicked=this.onRemoveClicked.bind(this),this.onSelectClicked=this.onSelectClicked.bind(this),this.isFocused=this.isFocused.bind(this)},mods:function(){return{"is-deleting":this.props.source.toBeDeleted}},onSelectClicked:function(){this.isFocused()?this.props.setSourceBlured(this.props.source):this.props.setSourceFocused(this.props.source)},isFocused:function(){return this.props.source[this.props.sourceId]===this.props.focusedSource},onRemoveClicked:function(){this.props.source.toBeDeleted||this.props.requestSourceDeleting(this.props.source)},getHeight:function(){return 100*this.props.source.height/this.props.source.width},getSourceSizeString:function(){var e=this.props.source.width+"x"+this.props.source.height,t=this.fitsFilters();if(this.props.toggleSource&&t){var n=this.props.toggleSource.bind(this,this.props.source);return o.default.createElement(m.default,{theme:"normal",size:"s",onChange:n,checked:this.props.source.selected},e)}return e},fitsFilters:function(){return void 0===this.props.source.available||this.props.source.available},content:function(){return this.props.source.status===f.default.UPLOADING?[o.default.createElement(s.default,{block:"batch-filters",key:"stub",elem:"item-stub"},o.default.createElement(p.default,{mix:{block:"batch-filters",elem:"item-stub-spinner"},size:"s",progress:!0}))]:[o.default.createElement(s.default,{block:"batch-filters",elem:"item-image",mods:{disabled:!this.fitsFilters(),focused:this.isFocused()},key:"image",attrs:{style:{height:Math.max(30,this.getHeight()),backgroundImage:"url("+this.props.source.screenshot_url+")"},onClick:this.onSelectClicked}}),o.default.createElement(s.default,{key:"actions",block:"batch-filters",elem:"item-actions"},o.default.createElement(s.default,{block:"batch-filters",elem:"item-size"},this.getSourceSizeString()),this.props.requestSourceDeleting?o.default.createElement(s.default,{block:"batch-filters",elem:"item-trash"},o.default.createElement(a.default,{theme:"trash",size:"16",opacity:20,attrs:{onClick:this.onRemoveClicked}})):"")]}})},816:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=n(14),u=(n(491),(n(269).default||n(269)).applyDecls()),a=r(u),c=(n(1422),(n(817).default||n(817)).applyDecls()),f=r(c),d=n(1425),p=r(d),h=(n(814),(n(344).default||n(344)).applyDecls()),m=r(h),y=function(){var e=n(3);return e().decl(n(29))("common")}(),v=r(y);t.default=(0,l.decl)({block:"html5-preview",willInit:function(){this.state={focusedCreative:null},this.setCreativeFocused=this.setCreativeFocused.bind(this),this.setCreativeBlured=this.setCreativeBlured.bind(this),this.toggleCreative=this.toggleCreative.bind(this),this.onBackClick=this.props.onBackClick.bind(this,this.props.html5.creatives)},setCreativeBlured:function(){this.setState({focusedCreative:null})},setCreativeFocused:function(e){this.setState({focusedCreative:e.id})},toggleCreative:function(e){this.props.toggleCreative(e.id)},content:function(){var e=this,t=this.props.html5&&this.props.html5.archive||!1,n=this.props.html5&&this.props.html5.creatives||[],r=n.map(function(t){return e.props.creativesMap[t]}),i=o.default.createElement(f.default,{key:"preview",creatives:n,focusedCreative:this.state.focusedCreative,toggleCreative:t?null:this.toggleCreative}),l=o.default.createElement(m.default,{key:"batch-filters",sources:r,sourceId:"id",focusedSource:this.state.focusedCreative,setSourceBlured:this.setCreativeBlured,setSourceFocused:this.setCreativeFocused,toggleCreative:t?null:this.toggleCreative}),u=o.default.createElement(p.default,{html5Id:this.props.html5.id});return o.default.createElement(a.default,{PreviewSidebar:l,Preview:i,Footer:t?null:u,entity:this.props.html5,onBackClick:this.onBackClick,backUrl:t?(0,s.html5Url)("/archive"):(0,s.html5Url)("/"),backText:(0,v.default)("back")})}})},817:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=n(243),u=n(1423),a=r(u),c=n(803),f=r(c);t.default=(0,l.decl)({block:"html5-preview-area",willInit:function(){this.creativeRefs={},this.scrollToFocusedCreative=this.scrollToFocusedCreative.bind(this),this.setCreativeRef=this.setCreativeRef.bind(this),this.setRef=this.setRef.bind(this),this.scope={}},setRef:function(e){this._ref=e,this.scope.dom=e},attrs:function(){return{ref:this.setRef}},setCreativeRef:function(e,t){this.creativeRefs[e]=t},componentDidUpdate:function(){this.props.focusedCreative&&this.scrollToFocusedCreative(this.props.focusedCreative)},scrollToFocusedCreative:function(e){this.creativeRefs[e]&&(0,s.scroll)(this._ref.parentNode,this.creativeRefs[e].offsetTop,180)},content:function(){var e=this;return[o.default.createElement(f.default,{key:"filter-notification"})].concat(this.props.creatives.map(function(t){return o.default.createElement(a.default,{key:t,id:t,scope:e.scope,focusedCreative:e.props.focusedCreative,setCreativeRef:e.setCreativeRef,toggleCreative:e.props.toggleCreative})}))}})},818:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(810),(n(343).default||n(343)).applyDecls()),u=r(s);t.default=(0,l.decl)({block:"html5-preview-area",elem:"item",attrs:function(){var e=this;return{ref:function(t){e.props.setCreativeRef(e.props.id,t)}}},content:function(){var e=null;return this.props.toggleCreative&&(e=this.props.toggleCreative.bind(this,this.props)),o.default.createElement(u.default,{focusedSource:this.props.focusedCreative,sourceId:"id",scope:this.props.scope,toggleSource:e,source:this.props.creative})}})},819:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=(n(30),n(31),n(43),n(107),n(108),n(51),n(52),(n(15).default||n(15)).applyDecls()),u=r(s),a=function(){var e=n(3);return e().decl(n(29))("common")}(),c=r(a);t.default=(0,l.decl)({block:"html5-preview",elem:"footer",willInit:function(){this.onSelectClick=this.props.onSelectClick.bind(this,this.props.creativeIds),this.onCancelClick=this.props.onCancelClick.bind(this,this.props.creativeIds)},content:function(){return[o.default.createElement(u.default,{key:"apply",size:"s",onClick:this.onSelectClick,theme:"action"},(0,c.default)("select")),o.default.createElement(u.default,{key:"cancel",size:"s",onClick:this.onCancelClick,theme:"normal"},(0,c.default)("cancel"))]}})},82:function(e,t){},820:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),l=n(0),s=r(l),u=(n(63),n(64),n(33),(n(150).default||n(150)).applyDecls()),a=r(u),c=n(1428),f=r(c),d=n(77),p=n(1429),h=r(p);t.default=(0,l.decl)({block:"html5-creative-preview",willInit:function(){var e=window.top!==window;this.state={loading:!0,preview:{}},this.setPreviewFrameRef=this.setPreviewFrameRef.bind(this),this.loadPreview=this.loadPreview.bind(this),e?(window.addEventListener("message",this.onMessage.bind(this)),(0,d.postMessage)("ready")):this.loadPreview()},mods:function(e){return{compact:"true"===h.default.parse(e.location.search.substring(1)).isCompactPreview}},onMessage:function(e){var t=e.data,n=t.type,r=t.data;"html5-preview"===n&&this.loadPreview(r)},loadPreview:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f.default.loadPreview(this.props.match.params.creativeId,t).then(function(t){e.setState({loading:!1,preview:t})})},setPreviewFrameRef:function(e){var t=e.contentDocument;t.open(),t.write(this.state.preview.content),t.close()},content:function(){var e=[o.default.createElement(a.default,{key:"spinner",size:"s",progress:this.state.loading,mix:{block:"html5-creative-preview",elem:"spin"}})];return this.state.loading||e.push(o.default.createElement(s.default,{key:"preview",block:"html5-creative-preview",elem:"frame",tag:"iframe",attrs:{height:this.state.preview.height,width:this.state.preview.width,ref:this.setPreviewFrameRef}})),e}})},88:function(e,t,n){"use strict";function r(e,t){var n=Object.assign({},t.queryParams,a().queryParams),r=t.options,i=t.path,o=void 0;return r=r||{},o=Object.keys(n).map(function(e){return e+"="+n[e]}).join("&"),r.headers=r.headers||{},r.headers["X-Requested-With"]="XMLHttpRequest",!r.body||r.body instanceof FormData||(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(r.body)),fetch(e+i+"?"+o,Object.assign({},{credentials:"same-origin"},r)).then(function(e){return e.ok?!1!==r.json?e.json().catch(function(){return Promise.reject(new u.default(e.status,e))}):e.text():e.json().then(function(t){return Promise.reject(new u.default(e.status,t))},function(){return Promise.reject(new u.default(e.status))})},function(e){return Promise.reject(new u.default(null,e))})}function i(e){return r("/landings",e)}function o(e){return r("/html5",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.request=r,t.landingsRequest=i,t.html5Request=o;var l=n(14),s=n(380),u=function(e){return e&&e.__esModule?e:{default:e}}(s),a=function(){return{queryParams:{shared_data:(0,l.getEncodedSharedData)()}}}},9:function(e,t){},90:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(130),i=(n(431),(n(232).default||n(232)).applyDecls()),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=(0,r.withRouter)(o.default)},91:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),l=r(o),s=n(0),u=r(s),a=n(4),c=r(a),f=(n(78),n(79),n(453),n(92),n(65),n(248),(n(249).default||n(249)).applyDecls()),d=r(f),p=(n(9),n(455),n(456),n(11),n(8),(n(6).default||n(6)).applyDecls()),h=r(p);n(457),t.default=(0,s.decl)({block:"editable-name",willInit:function(){this.state={editText:this.props.name,isEditing:!1},this.setInputRef=this.setInputRef.bind(this),this.onEditStart=this.onEditStart.bind(this),this.onEditComplete=this.onEditComplete.bind(this),this.onEditReset=this.onEditReset.bind(this),this.onTextChange=this.onTextChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onBlur=this.onBlur.bind(this)},mods:function(e){var t=e.hasIcon;return i({},this.__base.apply(this,arguments),{"has-icon":t})},setInputRef:function(e){e&&e._control.select()},onEditStart:function(){var e=this;this.setState({isEditing:!0},function(){e.props.onEditStart&&e.props.onEditStart()})},onEditReset:function(){var e=this;this.setState({isEditing:!1,editText:this.props.name},function(){e.props.onEditReset&&e.props.onEditReset()})},onEditComplete:function(){var e=this;if(this.state.isEditing){var t=this.state.editText||this.props.name;this.setState({isEditing:!1,editText:t},function(){e.props.onEditComplete(t)})}},onTextChange:function(e){this.setState({editText:e})},onKeyDown:function(e){13===e.keyCode?this.onEditComplete(this.state.editText):27===e.keyCode&&this.onEditReset()},onBlur:function(){this.onEditComplete()},componentWillReceiveProps:function(e){var t={},n=this.state.isEditing&&!e.isEditing;this.props.name!==e.name&&(t.editText=e.name),t.isEditing=e.isEditing,this.setState(t),n&&this.onEditComplete()},content:function(){return this.state.isEditing?[l.default.createElement(d.default,{key:"input",theme:"normal",size:"s",focused:!0,autofocus:!0,"enter-button":!0,ref:this.setInputRef,mix:[this.props.inputMix,{block:"editable-name",elem:"input"}],text:this.state.editText,onChange:this.onTextChange,onEnterClick:this.onEditComplete,controlAttrs:{onKeyDown:this.onKeyDown,onBlur:this.onBlur,maxLength:255}})]:l.default.createElement(u.default,{block:"editable-name",elem:"name-control",attrs:{onClick:this.onEditStart}},l.default.createElement(u.default,{block:"editable-name",elem:"current-name"},l.default.createElement(u.default,{block:"editable-name",elem:"name-label",tag:"span"},this.props.name),this.props.hasIcon?l.default.createElement(h.default,{theme:"edit",size:"9x14",mix:{block:"editable-name",elem:"icon"}}):""))}},{propTypes:{name:c.default.string,onEditComplete:c.default.func}})},93:function(e,t){}},[1377]);
//# sourceMappingURL=html5.ru.js.map